var ci=Object.defineProperty;var di=(r,e,t)=>e in r?ci(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var E=(r,e,t)=>di(r,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();const Lr=!1;var vr=Array.isArray,hi=Array.prototype.indexOf,_r=Array.from,fi=Object.defineProperty,Te=Object.getOwnPropertyDescriptor,dn=Object.getOwnPropertyDescriptors,pi=Object.prototype,mi=Array.prototype,yr=Object.getPrototypeOf;function yt(r){return typeof r=="function"}function gi(r){return r()}function nr(r){for(var e=0;e<r.length;e++)r[e]()}const re=2,hn=4,It=8,wr=16,me=32,ht=64,Ut=128,We=256,Dt=512,W=1024,ye=2048,ft=4096,de=8192,pt=16384,vi=32768,Tt=65536,_i=1<<17,yi=1<<19,fn=1<<20,Ee=Symbol("$state"),pn=Symbol("legacy props"),wi=Symbol("");function mn(r){return r===this.v}function bi(r,e){return r!=r?e==e:r!==e||r!==null&&typeof r=="object"||typeof r=="function"}function br(r){return!bi(r,this.v)}function Ci(r){throw new Error("https://svelte.dev/e/effect_in_teardown")}function Mi(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function ki(r){throw new Error("https://svelte.dev/e/effect_orphan")}function Si(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function Ii(r){throw new Error("https://svelte.dev/e/props_invalid_value")}function Ti(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function Ei(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function Ai(){throw new Error("https://svelte.dev/e/state_unsafe_local_read")}function xi(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}let mt=!1,Fi=!1;function Pi(){mt=!0}const Cr=1,Mr=2,gn=4,Ri=8,$i=16,Li=1,Ni=2,vn=4,ji=8,Ui=16,Di=2,Y=Symbol(),_n="http://www.w3.org/2000/svg";function J(r,e){var t={f:0,v:r,reactions:null,equals:mn,rv:0,wv:0};return t}function kr(r){return Oi(J(r))}function yn(r,e=!1){var n;const t=J(r);return e||(t.equals=br),mt&&j!==null&&j.l!==null&&((n=j.l).s??(n.s=[])).push(t),t}function Oi(r){return $!==null&&$.f&re&&(he===null?Hi([r]):he.push(r)),r}function q(r,e){return $!==null&&Et()&&$.f&(re|wr)&&(he===null||!he.includes(r))&&xi(),ir(r,e)}function ir(r,e){return r.equals(e)||(r.v,r.v=e,r.wv=jn(),wn(r,ye),Et()&&R!==null&&R.f&W&&!(R.f&(me|ht))&&(ge===null?Ji([r]):ge.push(r))),e}function wn(r,e){var t=r.reactions;if(t!==null)for(var n=Et(),i=t.length,s=0;s<i;s++){var o=t[s],d=o.f;d&ye||!n&&o===R||(se(o,e),d&(W|We)&&(d&re?wn(o,ft):Kt(o)))}}let bn=!1;function G(r,e=null,t){if(typeof r!="object"||r===null||Ee in r)return r;const n=yr(r);if(n!==pi&&n!==mi)return r;var i=new Map,s=vr(r),o=J(0);s&&i.set("length",J(r.length));var d;return new Proxy(r,{defineProperty(a,c,l){(!("value"in l)||l.configurable===!1||l.enumerable===!1||l.writable===!1)&&Ti();var u=i.get(c);return u===void 0?(u=J(l.value),i.set(c,u)):q(u,G(l.value,d)),!0},deleteProperty(a,c){var l=i.get(c);if(l===void 0)c in a&&i.set(c,J(Y));else{if(s&&typeof c=="string"){var u=i.get("length"),h=Number(c);Number.isInteger(h)&&h<u.v&&q(u,h)}q(l,Y),Nr(o)}return!0},get(a,c,l){var m;if(c===Ee)return r;var u=i.get(c),h=c in a;if(u===void 0&&(!h||(m=Te(a,c))!=null&&m.writable)&&(u=J(G(h?a[c]:Y,d)),i.set(c,u)),u!==void 0){var p=k(u);return p===Y?void 0:p}return Reflect.get(a,c,l)},getOwnPropertyDescriptor(a,c){var l=Reflect.getOwnPropertyDescriptor(a,c);if(l&&"value"in l){var u=i.get(c);u&&(l.value=k(u))}else if(l===void 0){var h=i.get(c),p=h==null?void 0:h.v;if(h!==void 0&&p!==Y)return{enumerable:!0,configurable:!0,value:p,writable:!0}}return l},has(a,c){var p;if(c===Ee)return!0;var l=i.get(c),u=l!==void 0&&l.v!==Y||Reflect.has(a,c);if(l!==void 0||R!==null&&(!u||(p=Te(a,c))!=null&&p.writable)){l===void 0&&(l=J(u?G(a[c],d):Y),i.set(c,l));var h=k(l);if(h===Y)return!1}return u},set(a,c,l,u){var w;var h=i.get(c),p=c in a;if(s&&c==="length")for(var m=l;m<h.v;m+=1){var g=i.get(m+"");g!==void 0?q(g,Y):m in a&&(g=J(Y),i.set(m+"",g))}h===void 0?(!p||(w=Te(a,c))!=null&&w.writable)&&(h=J(void 0),q(h,G(l,d)),i.set(c,h)):(p=h.v!==Y,q(h,G(l,d)));var y=Reflect.getOwnPropertyDescriptor(a,c);if(y!=null&&y.set&&y.set.call(u,l),!p){if(s&&typeof c=="string"){var M=i.get("length"),C=Number(c);Number.isInteger(C)&&C>=M.v&&q(M,C+1)}Nr(o)}return!0},ownKeys(a){k(o);var c=Reflect.ownKeys(a).filter(h=>{var p=i.get(h);return p===void 0||p.v!==Y});for(var[l,u]of i)u.v!==Y&&!(l in a)&&c.push(l);return c},setPrototypeOf(){Ei()}})}function Nr(r,e=1){q(r,r.v+e)}var jr,Cn,Mn;function Bi(){if(jr===void 0){jr=window;var r=Element.prototype,e=Node.prototype;Cn=Te(e,"firstChild").get,Mn=Te(e,"nextSibling").get,r.__click=void 0,r.__className="",r.__attributes=null,r.__styles=null,r.__e=void 0,Text.prototype.__t=void 0}}function Wt(r=""){return document.createTextNode(r)}function ot(r){return Cn.call(r)}function Vt(r){return Mn.call(r)}function A(r,e){return ot(r)}function Fe(r,e){{var t=ot(r);return t instanceof Comment&&t.data===""?Vt(t):t}}function x(r,e=1,t=!1){let n=r;for(;e--;)n=Vt(n);return n}function Qi(r){r.textContent=""}function ce(r){var e=re|ye;R===null?e|=We:R.f|=fn;var t=$!==null&&$.f&re?$:null;const n={children:null,ctx:j,deps:null,equals:mn,f:e,fn:r,reactions:null,rv:0,v:null,wv:0,parent:t??R};return t!==null&&(t.children??(t.children=[])).push(n),n}function kn(r){const e=ce(r);return e.equals=br,e}function Sn(r){var e=r.children;if(e!==null){r.children=null;for(var t=0;t<e.length;t+=1){var n=e[t];n.f&re?Sr(n):fe(n)}}}function Gi(r){for(var e=r.parent;e!==null;){if(!(e.f&re))return e;e=e.parent}return null}function In(r){var e,t=R;pe(Gi(r));try{Sn(r),e=Dn(r)}finally{pe(t)}return e}function Tn(r){var e=In(r),t=(De||r.f&We)&&r.deps!==null?ft:W;se(r,t),r.equals(e)||(r.v=e,r.wv=jn())}function Sr(r){Sn(r),St(r,0),se(r,pt),r.v=r.children=r.deps=r.ctx=r.reactions=null}function En(r){R===null&&$===null&&ki(),$!==null&&$.f&We&&Mi(),Ar&&Ci()}function qi(r,e){var t=e.last;t===null?e.last=e.first=r:(t.next=r,r.prev=t,e.last=r)}function gt(r,e,t,n=!0){var i=(r&ht)!==0,s=R,o={ctx:j,deps:null,deriveds:null,nodes_start:null,nodes_end:null,f:r|ye,first:null,fn:e,last:null,next:null,parent:i?null:s,prev:null,teardown:null,transitions:null,wv:0};if(t){var d=nt;try{Ur(!0),xr(o),o.f|=vi}catch(l){throw fe(o),l}finally{Ur(d)}}else e!==null&&Kt(o);var a=t&&o.deps===null&&o.first===null&&o.nodes_start===null&&o.teardown===null&&(o.f&(fn|Ut))===0;if(!a&&!i&&n&&(s!==null&&qi(o,s),$!==null&&$.f&re)){var c=$;(c.children??(c.children=[])).push(o)}return o}function Wi(r){const e=gt(It,null,!1);return se(e,W),e.teardown=r,e}function Qe(r){En();var e=R!==null&&(R.f&me)!==0&&j!==null&&!j.m;if(e){var t=j;(t.e??(t.e=[])).push({fn:r,effect:R,reaction:$})}else{var n=Ir(r);return n}}function Vi(r){return En(),Tr(r)}function zi(r){const e=gt(ht,r,!0);return(t={})=>new Promise(n=>{t.outro?at(e,()=>{fe(e),n(void 0)}):(fe(e),n(void 0))})}function Ir(r){return gt(hn,r,!1)}function Tr(r){return gt(It,r,!0)}function ne(r){return vt(r)}function vt(r,e=0){return gt(It|wr|e,r,!0)}function Ae(r,e=!0){return gt(It|me,r,!0,e)}function An(r){var e=r.teardown;if(e!==null){const t=Ar,n=$;Dr(!0),xe(null);try{e.call(null)}finally{Dr(t),xe(n)}}}function xn(r){var e=r.deriveds;if(e!==null){r.deriveds=null;for(var t=0;t<e.length;t+=1)Sr(e[t])}}function Fn(r,e=!1){var t=r.first;for(r.first=r.last=null;t!==null;){var n=t.next;fe(t,e),t=n}}function Yi(r){for(var e=r.first;e!==null;){var t=e.next;e.f&me||fe(e),e=t}}function fe(r,e=!0){var t=!1;if((e||r.f&yi)&&r.nodes_start!==null){for(var n=r.nodes_start,i=r.nodes_end;n!==null;){var s=n===i?null:Vt(n);n.remove(),n=s}t=!0}Fn(r,e&&!t),xn(r),St(r,0),se(r,pt);var o=r.transitions;if(o!==null)for(const a of o)a.stop();An(r);var d=r.parent;d!==null&&d.first!==null&&Pn(r),r.next=r.prev=r.teardown=r.ctx=r.deps=r.fn=r.nodes_start=r.nodes_end=null}function Pn(r){var e=r.parent,t=r.prev,n=r.next;t!==null&&(t.next=n),n!==null&&(n.prev=t),e!==null&&(e.first===r&&(e.first=n),e.last===r&&(e.last=t))}function at(r,e){var t=[];Er(r,t,!0),Rn(t,()=>{fe(r),e&&e()})}function Rn(r,e){var t=r.length;if(t>0){var n=()=>--t||e();for(var i of r)i.out(n)}else e()}function Er(r,e,t){if(!(r.f&de)){if(r.f^=de,r.transitions!==null)for(const o of r.transitions)(o.is_global||t)&&e.push(o);for(var n=r.first;n!==null;){var i=n.next,s=(n.f&Tt)!==0||(n.f&me)!==0;Er(n,e,s?t:!1),n=i}}}function kt(r){$n(r,!0)}function $n(r,e){if(r.f&de){r.f^=de,r.f&W||(r.f^=W),At(r)&&(se(r,ye),Kt(r));for(var t=r.first;t!==null;){var n=t.next,i=(t.f&Tt)!==0||(t.f&me)!==0;$n(t,i?e:!1),t=n}if(r.transitions!==null)for(const s of r.transitions)(s.is_global||e)&&s.in()}}let sr=!1,or=[];function Ki(){sr=!1;const r=or.slice();or=[],nr(r)}function zt(r){sr||(sr=!0,queueMicrotask(Ki)),or.push(r)}function Ln(r){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}let Lt=!1,Ot=!1,Bt=null,nt=!1,Ar=!1;function Ur(r){nt=r}function Dr(r){Ar=r}let ar=[],Ct=0;let $=null;function xe(r){$=r}let R=null;function pe(r){R=r}let he=null;function Hi(r){he=r}let Z=null,ee=0,ge=null;function Ji(r){ge=r}let Nn=1,Qt=0,De=!1,j=null;function jn(){return++Nn}function Et(){return!mt||j!==null&&j.l===null}function At(r){var c;var e=r.f;if(e&ye)return!0;if(e&ft){var t=r.deps,n=(e&We)!==0;if(t!==null){var i,s,o=(e&Dt)!==0,d=n&&R!==null&&!De,a=t.length;if(o||d){for(i=0;i<a;i++)s=t[i],(o||!((c=s==null?void 0:s.reactions)!=null&&c.includes(r)))&&(s.reactions??(s.reactions=[])).push(r);o&&(r.f^=Dt)}for(i=0;i<a;i++)if(s=t[i],At(s)&&Tn(s),s.wv>r.wv)return!0}(!n||R!==null&&!De)&&se(r,W)}return!1}function Zi(r,e){for(var t=e;t!==null;){if(t.f&Ut)try{t.fn(r);return}catch{t.f^=Ut}t=t.parent}throw Lt=!1,r}function Xi(r){return(r.f&pt)===0&&(r.parent===null||(r.parent.f&Ut)===0)}function Yt(r,e,t,n){if(Lt){if(t===null&&(Lt=!1),Xi(e))throw r;return}t!==null&&(Lt=!0);{Zi(r,e);return}}function Un(r,e,t=0){var n=r.reactions;if(n!==null)for(var i=0;i<n.length;i++){var s=n[i];s.f&re?Un(s,e,t+1):e===s&&(t===0?se(s,ye):s.f&W&&se(s,ft),Kt(s))}}function Dn(r){var h;var e=Z,t=ee,n=ge,i=$,s=De,o=he,d=j,a=r.f;Z=null,ee=0,ge=null,$=a&(me|ht)?null:r,De=!nt&&(a&We)!==0,he=null,j=r.ctx,Qt++;try{var c=(0,r.fn)(),l=r.deps;if(Z!==null){var u;if(St(r,ee),l!==null&&ee>0)for(l.length=ee+Z.length,u=0;u<Z.length;u++)l[ee+u]=Z[u];else r.deps=l=Z;if(!De)for(u=ee;u<l.length;u++)((h=l[u]).reactions??(h.reactions=[])).push(r)}else l!==null&&ee<l.length&&(St(r,ee),l.length=ee);if(Et()&&ge!==null&&!(r.f&(re|ft|ye)))for(u=0;u<ge.length;u++)Un(ge[u],r);return i!==null&&Qt++,c}finally{Z=e,ee=t,ge=n,$=i,De=s,he=o,j=d}}function es(r,e){let t=e.reactions;if(t!==null){var n=hi.call(t,r);if(n!==-1){var i=t.length-1;i===0?t=e.reactions=null:(t[n]=t[i],t.pop())}}t===null&&e.f&re&&(Z===null||!Z.includes(e))&&(se(e,ft),e.f&(We|Dt)||(e.f^=Dt),St(e,0))}function St(r,e){var t=r.deps;if(t!==null)for(var n=e;n<t.length;n++)es(r,t[n])}function xr(r){var e=r.f;if(!(e&pt)){se(r,W);var t=R,n=j;R=r;try{e&wr?Yi(r):Fn(r),xn(r),An(r);var i=Dn(r);r.teardown=typeof i=="function"?i:null,r.wv=Nn;var s=r.deps,o;Lr&&Fi&&r.f&ye}catch(d){Yt(d,r,t,n||r.ctx)}finally{R=t}}}function ts(){if(Ct>1e3){Ct=0;try{Si()}catch(r){if(Bt!==null)Yt(r,Bt,null);else throw r}}Ct++}function rs(r){var e=r.length;if(e!==0){ts();var t=nt;nt=!0;try{for(var n=0;n<e;n++){var i=r[n];i.f&W||(i.f^=W);var s=[];On(i,s),ns(s)}}finally{nt=t}}}function ns(r){var e=r.length;if(e!==0)for(var t=0;t<e;t++){var n=r[t];if(!(n.f&(pt|de)))try{At(n)&&(xr(n),n.deps===null&&n.first===null&&n.nodes_start===null&&(n.teardown===null?Pn(n):n.fn=null))}catch(i){Yt(i,n,null,n.ctx)}}}function is(){if(Ot=!1,Ct>1001)return;const r=ar;ar=[],rs(r),Ot||(Ct=0,Bt=null)}function Kt(r){Ot||(Ot=!0,queueMicrotask(is)),Bt=r;for(var e=r;e.parent!==null;){e=e.parent;var t=e.f;if(t&(ht|me)){if(!(t&W))return;e.f^=W}}ar.push(e)}function On(r,e){var t=r.first,n=[];e:for(;t!==null;){var i=t.f,s=(i&me)!==0,o=s&&(i&W)!==0,d=t.next;if(!o&&!(i&de))if(i&It){if(s)t.f^=W;else try{At(t)&&xr(t)}catch(u){Yt(u,t,null,t.ctx)}var a=t.first;if(a!==null){t=a;continue}}else i&hn&&n.push(t);if(d===null){let u=t.parent;for(;u!==null;){if(r===u)break e;var c=u.next;if(c!==null){t=c;continue e}u=u.parent}}t=d}for(var l=0;l<n.length;l++)a=n[l],e.push(a),On(a,e)}function k(r){var l;var e=r.f,t=(e&re)!==0;if(t&&e&pt){var n=In(r);return Sr(r),n}if($!==null){he!==null&&he.includes(r)&&Ai();var i=$.deps;r.rv<Qt&&(r.rv=Qt,Z===null&&i!==null&&i[ee]===r?ee++:Z===null?Z=[r]:Z.push(r))}else if(t&&r.deps===null)for(var s=r,o=s.parent,d=s;o!==null;)if(o.f&re){var a=o;d=a,o=a.parent}else{var c=o;(l=c.deriveds)!=null&&l.includes(d)||(c.deriveds??(c.deriveds=[])).push(d);break}return t&&(s=r,At(s)&&Tn(s)),r.v}function Ge(r){const e=$;try{return $=null,r()}finally{$=e}}const ss=-7169;function se(r,e){r.f=r.f&ss|e}function Or(r,e=1){var t=k(r),n=e===1?t++:t--;return q(r,t),n}function we(r,e=!1,t){j={p:j,c:null,e:null,m:!1,s:r,x:null,l:null},mt&&!e&&(j.l={s:null,u:null,r1:[],r2:J(!1)})}function be(r){const e=j;if(e!==null){const o=e.e;if(o!==null){var t=R,n=$;e.e=null;try{for(var i=0;i<o.length;i++){var s=o[i];pe(s.effect),xe(s.reaction),Ir(s.fn)}}finally{pe(t),xe(n)}}j=e.p,e.m=!0}return{}}function os(r){if(!(typeof r!="object"||!r||r instanceof EventTarget)){if(Ee in r)ur(r);else if(!Array.isArray(r))for(let e in r){const t=r[e];typeof t=="object"&&t&&Ee in t&&ur(t)}}}function ur(r,e=new Set){if(typeof r=="object"&&r!==null&&!(r instanceof EventTarget)&&!e.has(r)){e.add(r),r instanceof Date&&r.getTime();for(let n in r)try{ur(r[n],e)}catch{}const t=yr(r);if(t!==Object.prototype&&t!==Array.prototype&&t!==Map.prototype&&t!==Set.prototype&&t!==Date.prototype){const n=dn(t);for(let i in n){const s=n[i].get;if(s)try{s.call(r)}catch{}}}}}function as(r){return r.endsWith("capture")&&r!=="gotpointercapture"&&r!=="lostpointercapture"}const us=["beforeinput","click","change","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"];function ls(r){return us.includes(r)}const cs={formnovalidate:"formNoValidate",ismap:"isMap",nomodule:"noModule",playsinline:"playsInline",readonly:"readOnly",defaultvalue:"defaultValue",defaultchecked:"defaultChecked",srcobject:"srcObject"};function ds(r){return r=r.toLowerCase(),cs[r]??r}const hs=["touchstart","touchmove"];function fs(r){return hs.includes(r)}function ps(r,e){if(e){const t=document.body;r.autofocus=!0,zt(()=>{document.activeElement===t&&r.focus()})}}let Br=!1;function ms(){Br||(Br=!0,document.addEventListener("reset",r=>{Promise.resolve().then(()=>{var e;if(!r.defaultPrevented)for(const t of r.target.elements)(e=t.__on_r)==null||e.call(t)})},{capture:!0}))}function Bn(r){var e=$,t=R;xe(null),pe(null);try{return r()}finally{xe(e),pe(t)}}function gs(r,e,t,n=t){r.addEventListener(e,()=>Bn(t));const i=r.__on_r;i?r.__on_r=()=>{i(),n(!0)}:r.__on_r=()=>n(!0),ms()}const Qn=new Set,lr=new Set;function Gn(r,e,t,n){function i(s){if(n.capture||bt.call(e,s),!s.cancelBubble)return Bn(()=>t.call(this,s))}return r.startsWith("pointer")||r.startsWith("touch")||r==="wheel"?zt(()=>{e.addEventListener(r,i,n)}):e.addEventListener(r,i,n),i}function Gt(r,e,t,n,i){var s={capture:n,passive:i},o=Gn(r,e,t,s);(e===document.body||e===window||e===document)&&Wi(()=>{e.removeEventListener(r,o,s)})}function Ve(r){for(var e=0;e<r.length;e++)Qn.add(r[e]);for(var t of lr)t(r)}function bt(r){var C;var e=this,t=e.ownerDocument,n=r.type,i=((C=r.composedPath)==null?void 0:C.call(r))||[],s=i[0]||r.target,o=0,d=r.__root;if(d){var a=i.indexOf(d);if(a!==-1&&(e===document||e===window)){r.__root=e;return}var c=i.indexOf(e);if(c===-1)return;a<=c&&(o=a)}if(s=i[o]||r.target,s!==e){fi(r,"currentTarget",{configurable:!0,get(){return s||t}});var l=$,u=R;xe(null),pe(null);try{for(var h,p=[];s!==null;){var m=s.assignedSlot||s.parentNode||s.host||null;try{var g=s["__"+n];if(g!==void 0&&!s.disabled)if(vr(g)){var[y,...M]=g;y.apply(s,[r,...M])}else g.call(s,r)}catch(w){h?p.push(w):h=w}if(r.cancelBubble||m===e||m===null)break;s=m}if(h){for(let w of p)queueMicrotask(()=>{throw w});throw h}}finally{r.__root=e,delete r.currentTarget,xe(l),pe(u)}}}function Fr(r){var e=document.createElement("template");return e.innerHTML=r,e.content}function xt(r,e){var t=R;t.nodes_start===null&&(t.nodes_start=r,t.nodes_end=e)}function V(r,e){var t=(e&Di)!==0,n,i=!r.startsWith("<!>");return()=>{n===void 0&&(n=Fr(i?r:"<!>"+r),n=ot(n));var s=t?document.importNode(n,!0):n.cloneNode(!0);return xt(s,s),s}}function vs(r,e,t="svg"){var n=!r.startsWith("<!>"),i=`<${t}>${n?r:"<!>"+r}</${t}>`,s;return()=>{if(!s){var o=Fr(i),d=ot(o);s=ot(d)}var a=s.cloneNode(!0);return xt(a,a),a}}function Pe(){var r=document.createDocumentFragment(),e=document.createComment(""),t=Wt();return r.append(e,t),xt(e,t),r}function O(r,e){r!==null&&r.before(e)}function te(r,e){var t=e==null?"":typeof e=="object"?e+"":e;t!==(r.__t??(r.__t=r.nodeValue))&&(r.__t=t,r.nodeValue=t==null?"":t+"")}function _s(r,e){return ys(r,e)}const et=new Map;function ys(r,{target:e,anchor:t,props:n={},events:i,context:s,intro:o=!0}){Bi();var d=new Set,a=u=>{for(var h=0;h<u.length;h++){var p=u[h];if(!d.has(p)){d.add(p);var m=fs(p);e.addEventListener(p,bt,{passive:m});var g=et.get(p);g===void 0?(document.addEventListener(p,bt,{passive:m}),et.set(p,1)):et.set(p,g+1)}}};a(_r(Qn)),lr.add(a);var c=void 0,l=zi(()=>{var u=t??e.appendChild(Wt());return Ae(()=>{if(s){we({});var h=j;h.c=s}i&&(n.$$events=i),c=r(u,n)||{},s&&be()}),()=>{var m;for(var h of d){e.removeEventListener(h,bt);var p=et.get(h);--p===0?(document.removeEventListener(h,bt),et.delete(h)):et.set(h,p)}lr.delete(a),u!==t&&((m=u.parentNode)==null||m.removeChild(u))}});return ws.set(c,l),c}let ws=new WeakMap;function ut(r,e,t=!1){var n=r,i=null,s=null,o=Y,d=t?Tt:0,a=!1;const c=(u,h=!0)=>{a=!0,l(h,u)},l=(u,h)=>{o!==(o=u)&&(o?(i?kt(i):h&&(i=Ae(()=>h(n))),s&&at(s,()=>{s=null})):(s?kt(s):h&&(s=Ae(()=>h(n))),i&&at(i,()=>{i=null})))};vt(()=>{a=!1,e(c),a||l(null,null)},d)}function Pr(r,e){return e}function bs(r,e,t,n){for(var i=[],s=e.length,o=0;o<s;o++)Er(e[o].e,i,!0);var d=s>0&&i.length===0&&t!==null;if(d){var a=t.parentNode;Qi(a),a.append(t),n.clear(),Se(r,e[0].prev,e[s-1].next)}Rn(i,()=>{for(var c=0;c<s;c++){var l=e[c];d||(n.delete(l.k),Se(r,l.prev,l.next)),fe(l.e,!d)}})}function Ht(r,e,t,n,i,s=null){var o=r,d={flags:e,items:new Map,first:null},a=(e&gn)!==0;if(a){var c=r;o=c.appendChild(Wt())}var l=null,u=!1,h=kn(()=>{var p=t();return vr(p)?p:p==null?[]:_r(p)});vt(()=>{var p=k(h),m=p.length;if(!(u&&m===0)){u=m===0;{var g=$;Cs(p,d,o,i,e,(g.f&de)!==0,n)}s!==null&&(m===0?l?kt(l):l=Ae(()=>s(o)):l!==null&&at(l,()=>{l=null})),k(h)}})}function Cs(r,e,t,n,i,s,o,d){var Le,He,Je,B;var a=(i&Ri)!==0,c=(i&(Cr|Mr))!==0,l=r.length,u=e.items,h=e.first,p=h,m,g=null,y,M=[],C=[],w,I,S,b;if(a)for(b=0;b<l;b+=1)w=r[b],I=o(w,b),S=u.get(I),S!==void 0&&((Le=S.a)==null||Le.measure(),(y??(y=new Set)).add(S));for(b=0;b<l;b+=1){if(w=r[b],I=o(w,b),S=u.get(I),S===void 0){var F=p?p.e.nodes_start:t;g=ks(F,e,g,g===null?e.first:g.next,w,I,b,n,i),u.set(I,g),M=[],C=[],p=g.next;continue}if(c&&Ms(S,w,b,i),S.e.f&de&&(kt(S.e),a&&((He=S.a)==null||He.unfix(),(y??(y=new Set)).delete(S))),S!==p){if(m!==void 0&&m.has(S)){if(M.length<C.length){var T=C[0],U;g=T.prev;var oe=M[0],Ce=M[M.length-1];for(U=0;U<M.length;U+=1)Qr(M[U],T,t);for(U=0;U<C.length;U+=1)m.delete(C[U]);Se(e,oe.prev,Ce.next),Se(e,g,oe),Se(e,Ce,T),p=T,g=Ce,b-=1,M=[],C=[]}else m.delete(S),Qr(S,p,t),Se(e,S.prev,S.next),Se(e,S,g===null?e.first:g.next),Se(e,g,S),g=S;continue}for(M=[],C=[];p!==null&&p.k!==I;)(s||!(p.e.f&de))&&(m??(m=new Set)).add(p),C.push(p),p=p.next;if(p===null)continue;S=p}M.push(S),g=S,p=S.next}if(p!==null||m!==void 0){for(var ae=m===void 0?[]:_r(m);p!==null;)(s||!(p.e.f&de))&&ae.push(p),p=p.next;var $e=ae.length;if($e>0){var _t=i&gn&&l===0?t:null;if(a){for(b=0;b<$e;b+=1)(Je=ae[b].a)==null||Je.measure();for(b=0;b<$e;b+=1)(B=ae[b].a)==null||B.fix()}bs(e,ae,_t,u)}}a&&zt(()=>{var _;if(y!==void 0)for(S of y)(_=S.a)==null||_.apply()}),R.first=e.first&&e.first.e,R.last=g&&g.e}function Ms(r,e,t,n){n&Cr&&ir(r.v,e),n&Mr?ir(r.i,t):r.i=t}function ks(r,e,t,n,i,s,o,d,a,c){var l=(a&Cr)!==0,u=(a&$i)===0,h=l?u?yn(i):J(i):i,p=a&Mr?J(o):o,m={i:p,v:h,k:s,a:null,e:null,prev:t,next:n};try{return m.e=Ae(()=>d(r,h,p),bn),m.e.prev=t&&t.e,m.e.next=n&&n.e,t===null?e.first=m:(t.next=m,t.e.next=m.e),n!==null&&(n.prev=m,n.e.prev=m.e),m}finally{}}function Qr(r,e,t){for(var n=r.next?r.next.e.nodes_start:t,i=e?e.e.nodes_start:t,s=r.e.nodes_start;s!==n;){var o=Vt(s);i.before(s),s=o}}function Se(r,e,t){e===null?r.first=t:(e.next=t,e.e.next=t&&t.e),t!==null&&(t.prev=e,t.e.prev=e&&e.e)}function Ss(r,e,t,n,i){var s=r,o="",d;vt(()=>{o!==(o=e()??"")&&(d!==void 0&&(fe(d),d=void 0),o!==""&&(d=Ae(()=>{var a=o+"",c=Fr(a);xt(ot(c),c.lastChild),s.before(c)})))})}function Re(r,e,t,n,i){var d;var s=(d=e.$$slots)==null?void 0:d[t],o=!1;s===!0&&(s=e.children,o=!0),s===void 0||s(r,o?()=>n:n)}function Is(r,e,t){var n=r,i,s;vt(()=>{i!==(i=e())&&(s&&(at(s),s=null),i&&(s=Ae(()=>t(n,i))))},Tt)}function Ts(r,e,t,n,i,s){var o,d,a=null,c=r,l;vt(()=>{const u=e()||null;var h=_n;u!==o&&(l&&(u===null?at(l,()=>{l=null,d=null}):u===d?kt(l):fe(l)),u&&u!==d&&(l=Ae(()=>{a=document.createElementNS(h,u),xt(a,a);{var p=a.appendChild(Wt());n(a,p)}R.nodes_end=a,c.before(a)})),o=u,o&&(d=o))},Tt)}function qn(r){var e,t,n="";if(typeof r=="string"||typeof r=="number")n+=r;else if(typeof r=="object")if(Array.isArray(r)){var i=r.length;for(e=0;e<i;e++)r[e]&&(t=qn(r[e]))&&(n&&(n+=" "),n+=t)}else for(t in r)r[t]&&(n&&(n+=" "),n+=t);return n}function Es(){for(var r,e,t=0,n="",i=arguments.length;t<i;t++)(r=arguments[t])&&(e=qn(r))&&(n&&(n+=" "),n+=e);return n}function As(r){return typeof r=="object"?Es(r):r??""}function xs(r,e){e?r.hasAttribute("selected")||r.setAttribute("selected",""):r.removeAttribute("selected")}function Fs(r,e,t,n){var i=r.__attributes??(r.__attributes={});i[e]!==(i[e]=t)&&(e==="style"&&"__styles"in r&&(r.__styles={}),e==="loading"&&(r[wi]=t),t==null?r.removeAttribute(e):typeof t!="string"&&Wn(r).includes(e)?r[e]=t:r.setAttribute(e,t))}function Gr(r,e,t,n,i=!1,s=!1,o=!1){var d=e||{},a=r.tagName==="OPTION";for(var c in e)c in t||(t[c]=null);t.class&&(t.class=As(t.class));var l=Wn(r),u=r.__attributes??(r.__attributes={});for(const C in t){let w=t[C];if(a&&C==="value"&&w==null){r.value=r.__value="",d[C]=w;continue}var h=d[C];if(w!==h){d[C]=w;var p=C[0]+C[1];if(p!=="$$"){if(p==="on"){const I={},S="$$"+C;let b=C.slice(2);var m=ls(b);if(as(b)&&(b=b.slice(0,-7),I.capture=!0),!m&&h){if(w!=null)continue;r.removeEventListener(b,d[S],I),d[S]=null}if(w!=null)if(m)r[`__${b}`]=w,Ve([b]);else{let F=function(T){d[C].call(this,T)};var M=F;d[S]=Gn(b,r,F,I)}else m&&(r[`__${b}`]=void 0)}else if(C==="style"&&w!=null)r.style.cssText=w+"";else if(C==="autofocus")ps(r,!!w);else if(C==="__value"||C==="value"&&w!=null)r.value=r[C]=r.__value=w;else if(C==="selected"&&a)xs(r,w);else{var g=C;i||(g=ds(g));var y=g==="defaultValue"||g==="defaultChecked";if(w==null&&!s&&!y)if(u[C]=null,g==="value"||g==="checked"){let I=r;if(g==="value"){let S=I.defaultValue;I.removeAttribute(g),I.defaultValue=S}else{let S=I.defaultChecked;I.removeAttribute(g),I.defaultChecked=S}}else r.removeAttribute(C);else y||l.includes(g)&&(s||typeof w!="string")?r[g]=w:typeof w!="function"&&Fs(r,g,w)}C==="style"&&"__styles"in r&&(r.__styles={})}}}return d}var qr=new Map;function Wn(r){var e=qr.get(r.nodeName);if(e)return e;qr.set(r.nodeName,e=[]);for(var t,n=r,i=Element.prototype;i!==n;){t=dn(n);for(var s in t)t[s].set&&e.push(s);n=yr(n)}return e}function Oe(r,e,t){var n=r.__className,i=Ps(e);(n!==i||bn)&&(e==null?r.removeAttribute("class"):r.className=i,r.__className=i)}function Ps(r,e){return(r??"")+""}function Rs(r,e,t){if(t){if(r.classList.contains(e))return;r.classList.add(e)}else{if(!r.classList.contains(e))return;r.classList.remove(e)}}function Vn(r,e,t=e){var n=Et();gs(r,"input",i=>{var s=i?r.defaultValue:r.value;if(s=Jt(r)?Zt(s):s,t(s),n&&s!==(s=e())){var o=r.selectionStart,d=r.selectionEnd;r.value=s??"",d!==null&&(r.selectionStart=o,r.selectionEnd=Math.min(d,r.value.length))}}),Ge(e)==null&&r.value&&t(Jt(r)?Zt(r.value):r.value),Tr(()=>{var i=e();Jt(r)&&i===Zt(r.value)||r.type==="date"&&!i&&!r.value||i!==r.value&&(r.value=i??"")})}function Jt(r){var e=r.type;return e==="number"||e==="range"}function Zt(r){return r===""?null:+r}function Wr(r,e){return r===e||(r==null?void 0:r[Ee])===e}function $s(r={},e,t,n){return Ir(()=>{var i,s;return Tr(()=>{i=s,s=[],Ge(()=>{r!==t(...s)&&(e(r,...s),i&&Wr(t(...i),r)&&e(null,...i))})}),()=>{zt(()=>{s&&Wr(t(...s),r)&&e(null,...s)})}}),r}function Ls(r=!1){const e=j,t=e.l.u;if(!t)return;let n=()=>os(e.s);if(r){let i=0,s={};const o=ce(()=>{let d=!1;const a=e.s;for(const c in a)a[c]!==s[c]&&(s[c]=a[c],d=!0);return d&&i++,i});n=()=>k(o)}t.b.length&&Vi(()=>{Vr(e,n),nr(t.b)}),Qe(()=>{const i=Ge(()=>t.m.map(gi));return()=>{for(const s of i)typeof s=="function"&&s()}}),t.a.length&&Qe(()=>{Vr(e,n),nr(t.a)})}function Vr(r,e){if(r.l.s)for(const t of r.l.s)k(t);e()}let Ft=!1;function Ns(r){var e=Ft;try{return Ft=!1,[r(),Ft]}finally{Ft=e}}const js={get(r,e){if(!r.exclude.includes(e))return k(r.version),e in r.special?r.special[e]():r.props[e]},set(r,e,t){return e in r.special||(r.special[e]=Ie({get[e](){return r.props[e]}},e,vn)),r.special[e](t),Or(r.version),!0},getOwnPropertyDescriptor(r,e){if(!r.exclude.includes(e)&&e in r.props)return{enumerable:!0,configurable:!0,value:r.props[e]}},deleteProperty(r,e){return r.exclude.includes(e)||(r.exclude.push(e),Or(r.version)),!0},has(r,e){return r.exclude.includes(e)?!1:e in r.props},ownKeys(r){return Reflect.ownKeys(r.props).filter(e=>!r.exclude.includes(e))}};function _e(r,e){return new Proxy({props:r,exclude:e,special:{},version:J(0)},js)}const Us={get(r,e){let t=r.props.length;for(;t--;){let n=r.props[t];if(yt(n)&&(n=n()),typeof n=="object"&&n!==null&&e in n)return n[e]}},set(r,e,t){let n=r.props.length;for(;n--;){let i=r.props[n];yt(i)&&(i=i());const s=Te(i,e);if(s&&s.set)return s.set(t),!0}return!1},getOwnPropertyDescriptor(r,e){let t=r.props.length;for(;t--;){let n=r.props[t];if(yt(n)&&(n=n()),typeof n=="object"&&n!==null&&e in n){const i=Te(n,e);return i&&!i.configurable&&(i.configurable=!0),i}}},has(r,e){if(e===Ee||e===pn)return!1;for(let t of r.props)if(yt(t)&&(t=t()),t!=null&&e in t)return!0;return!1},ownKeys(r){const e=[];for(let t of r.props){yt(t)&&(t=t());for(const n in t)e.includes(n)||e.push(n)}return e}};function ze(...r){return new Proxy({props:r},Us)}function zr(r){for(var e=R,t=R;e!==null&&!(e.f&(me|ht));)e=e.parent;try{return pe(e),r()}finally{pe(t)}}function Ie(r,e,t,n){var F;var i=(t&Li)!==0,s=!mt||(t&Ni)!==0,o=(t&ji)!==0,d=(t&Ui)!==0,a=!1,c;o?[c,a]=Ns(()=>r[e]):c=r[e];var l=Ee in r||pn in r,u=o&&(((F=Te(r,e))==null?void 0:F.set)??(l&&e in r&&(T=>r[e]=T)))||void 0,h=n,p=!0,m=!1,g=()=>(m=!0,p&&(p=!1,d?h=Ge(n):h=n),h);c===void 0&&n!==void 0&&(u&&s&&Ii(),c=g(),u&&u(c));var y;if(s)y=()=>{var T=r[e];return T===void 0?g():(p=!0,m=!1,T)};else{var M=zr(()=>(i?ce:kn)(()=>r[e]));M.f|=_i,y=()=>{var T=k(M);return T!==void 0&&(h=void 0),T===void 0?h:T}}if(!(t&vn))return y;if(u){var C=r.$$legacy;return function(T,U){return arguments.length>0?((!s||!U||C||a)&&u(U?y():T),T):y()}}var w=!1,I=!1,S=yn(c),b=zr(()=>ce(()=>{var T=y(),U=k(S);return w?(w=!1,I=!0,U):(I=!1,S.v=T)}));return i||(b.equals=br),function(T,U){if(arguments.length>0){const oe=U?k(b):s&&o?G(T):T;return b.equals(oe)||(w=!0,q(S,oe),m&&h!==void 0&&(h=oe),Ge(()=>k(b))),T}return k(b)}}function Ds(r){j===null&&Ln(),mt&&j.l!==null?Bs(j).m.push(r):Qe(()=>{const e=Ge(r);if(typeof e=="function")return e})}function Os(r){j===null&&Ln(),Ds(()=>()=>Ge(r))}function Bs(r){var e=r.l;return e.u??(e.u={a:[],b:[],m:[]})}const Qs="5";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Qs);const Yr=new Map;function Gs(r){const e=Array.isArray(r)?r:[r],t=e.join(","),n=Yr.get(t)??(()=>{const i=zn(e),s=qs(i);return Yr.set(t,s),s})();return i=>n(i)}function zn(r){return Array.isArray(r)?r.map(e=>e.split(":")):[r.split(":")]}function qs(r){const e=r.flatMap(i=>Ws(i,Yn(i))),t=zs(e),n=Ys(t);return i=>!!n(i.update,i)}function Yn(r){const e=Nt,t=[r].flatMap(n=>{const[i,s,o]=n;if(!(i in tn))return[n];if(!i&&!s&&!o)return[n];const a=tn[i].map(c=>[c,s,o]);return s===void 0||s in er&&(s||o)?a:a.filter(([c])=>{var l;return!!((l=e[c])!=null&&l[s])})}).flatMap(n=>{const[i,s,o]=n;if(!(s in er))return[n];if(!s&&!o)return[n];const a=er[s].map(c=>[i,c,o]);return o===void 0?a:a.filter(([,c])=>{var l,u;return!!((u=(l=e[i])==null?void 0:l[c])!=null&&u[o])})});if(t.length===0)throw new Error(`Shortcuts in '${r.join(":")}' do not expand to any valid filter query`);return t}function Ws(r,e){if(e.length===0)throw new Error("Empty filter query given");const t=e.map(Vs).filter(n=>n!==!0);if(t.length===0)return e;throw t.length===1?new Error(t[0]):new Error(`Invalid filter query '${r.join(":")}'. There are ${t.length} errors after expanding the contained shortcuts: ${t.join("; ")}`)}function Vs(r){const[e,t,n,...i]=r;if(e===void 0)return"Empty filter query given";if(!(e in Nt)){const d=Object.keys(Nt);return`Invalid L1 filter '${e}' given in '${r.join(":")}'. Permitted values are: ${d.map(a=>`'${a}'`).join(", ")}.`}if(t===void 0)return!0;const s=Nt[e];if(!(t in s)){const d=Object.keys(s);return`Invalid L2 filter '${t}' given in '${r.join(":")}'. Permitted values are: ${d.map(a=>`'${a}'`).join(", ")}.`}if(n===void 0)return!0;const o=s[t];if(!(n in o)){const d=Object.keys(o);return`Invalid L3 filter '${n}' given in '${r.join(":")}'. ${d.length===0?`No further filtering is possible after '${e}:${t}'.`:`Permitted values are: ${d.map(a=>`'${a}'`).join(", ")}.`}`}return i.length===0?!0:`Cannot filter further than three levels, ':${i.join(":")}' is invalid!`}function zs(r){const e={};for(const[t,n,i]of r){const s=e[t]??(e[t]={});if(n!==void 0){const o=s[n]??(s[n]=new Set);i!==void 0&&o.add(i)}}return e}function Xt(r,e){return(t,n)=>r(t,n)||e(t,n)}function Kr(r,e){return(t,n)=>{const i=r(t,n);return i&&e(i,n)}}function Hr(r){return(e,t)=>r(e,t)!=null}function Ys(r){const e=Object.entries(r).map(([t,n])=>{const i=o=>o[t],s=Object.entries(n).map(([o,d])=>{const a=l=>l[o],c=Array.from(d).map(l=>l==="me"?(h,p)=>{const m=p.me.id;return Jr(h,g=>g.id===m)}:h=>Jr(h,p=>p[l]||p.type===l));return c.length===0?Hr(a):Kr(a,c.reduce(Xt))});return s.length===0?Hr(i):Kr(i,s.reduce(Xt))});if(e.length===0)throw new Error("Cannot create filter function for empty query");return e.reduce(Xt)}function Jr(r,e){const t=n=>n!=null&&e(n);return Array.isArray(r)?r.some(t):t(r)}const Zr={mention:{},hashtag:{},cashtag:{},bot_command:{},url:{},email:{},phone_number:{},bold:{},italic:{},underline:{},strikethrough:{},spoiler:{},blockquote:{},expandable_blockquote:{},code:{},pre:{},text_link:{},text_mention:{},custom_emoji:{}},cr={me:{},is_bot:{},is_premium:{},added_to_attachment_menu:{}},Ks={user:{},hidden_user:{},chat:{},channel:{}},Hs={is_video:{},is_animated:{},premium_animation:{}},dr={emoji:{},custom_emoji:{},paid:{}},Kn={forward_origin:Ks,is_topic_message:{},is_automatic_forward:{},business_connection_id:{},text:{},animation:{},audio:{},document:{},paid_media:{},photo:{},sticker:Hs,story:{},video:{},video_note:{},voice:{},contact:{},dice:{},game:{},poll:{},venue:{},location:{},entities:Zr,caption_entities:Zr,caption:{},effect_id:{},has_media_spoiler:{},new_chat_title:{},new_chat_photo:{},delete_chat_photo:{},message_auto_delete_timer_changed:{},pinned_message:{},invoice:{},proximity_alert_triggered:{},chat_background_set:{},giveaway_created:{},giveaway:{only_new_members:{},has_public_winners:{}},giveaway_winners:{only_new_members:{},was_refunded:{}},giveaway_completed:{},video_chat_scheduled:{},video_chat_started:{},video_chat_ended:{},video_chat_participants_invited:{},web_app_data:{}},Pt={...Kn,new_chat_members:cr,left_chat_member:cr,group_chat_created:{},supergroup_chat_created:{},migrate_to_chat_id:{},migrate_from_chat_id:{},successful_payment:{},refunded_payment:{},users_shared:{},chat_shared:{},connected_website:{},write_access_allowed:{},passport_data:{},boost_added:{},forum_topic_created:{},forum_topic_edited:{name:{},icon_custom_emoji_id:{}},forum_topic_closed:{},forum_topic_reopened:{},general_forum_topic_hidden:{},general_forum_topic_unhidden:{},sender_boost_count:{}},Xr={...Kn,channel_chat_created:{}},Js={can_reply:{},is_enabled:{}},Zs={old_reaction:dr,new_reaction:dr},Xs={reactions:dr},eo={data:{},game_short_name:{}},en={from:cr},Nt={message:Pt,edited_message:Pt,channel_post:Xr,edited_channel_post:Xr,business_connection:Js,business_message:Pt,edited_business_message:Pt,deleted_business_messages:{},inline_query:{},chosen_inline_result:{},callback_query:eo,shipping_query:{},pre_checkout_query:{},poll:{},poll_answer:{},my_chat_member:en,chat_member:en,chat_join_request:{},message_reaction:Zs,message_reaction_count:Xs,chat_boost:{},removed_chat_boost:{},purchased_paid_media:{}},tn={"":["message","channel_post"],msg:["message","channel_post"],edit:["edited_message","edited_channel_post"]},er={"":["entities","caption_entities"],media:["photo","video"],file:["photo","animation","audio","document","video","video_note","voice","sticker"]},le={filterQuery(r){const e=Gs(r);return t=>e(t)},text(r){const e=le.filterQuery([":text",":caption"]),t=Ne(r);return n=>{if(!e(n))return!1;const i=n.message??n.channelPost,s=i.text??i.caption;return je(n,s,t)}},command(r){const e=le.filterQuery(":entities:bot_command"),t=new Set,n=new Set;return qt(r).forEach(i=>{if(i.startsWith("/"))throw new Error(`Do not include '/' when registering command handlers (use '${i.substring(1)}' not '${i}')`);(i.includes("@")?t:n).add(i)}),i=>{if(!e(i))return!1;const s=i.message??i.channelPost,o=s.text??s.caption;return s.entities.some(d=>{if(d.type!=="bot_command"||d.offset!==0)return!1;const a=o.substring(1,d.length);if(n.has(a)||t.has(a))return i.match=o.substring(a.length+1).trimStart(),!0;const c=a.indexOf("@");if(c===-1)return!1;const l=a.substring(c+1).toLowerCase(),u=i.me.username.toLowerCase();if(l!==u)return!1;const h=a.substring(0,c);return n.has(h)?(i.match=o.substring(a.length+1).trimStart(),!0):!1})}},reaction(r){const e=le.filterQuery("message_reaction"),t=typeof r=="string"?[{type:"emoji",emoji:r}]:(Array.isArray(r)?r:[r]).map(o=>typeof o=="string"?{type:"emoji",emoji:o}:o),n=new Set(t.filter(o=>o.type==="emoji").map(o=>o.emoji)),i=new Set(t.filter(o=>o.type==="custom_emoji").map(o=>o.custom_emoji_id)),s=t.some(o=>o.type==="paid");return o=>{if(!e(o))return!1;const{old_reaction:d,new_reaction:a}=o.messageReaction;for(const c of a){let l=!1;if(c.type==="emoji"){for(const u of d)if(u.type==="emoji"&&u.emoji===c.emoji){l=!0;break}}else if(c.type==="custom_emoji"){for(const u of d)if(u.type==="custom_emoji"&&u.custom_emoji_id===c.custom_emoji_id){l=!0;break}}else if(c.type==="paid"){for(const u of d)if(u.type==="paid"){l=!0;break}}if(!l)if(c.type==="emoji"){if(n.has(c.emoji))return!0}else if(c.type==="custom_emoji"){if(i.has(c.custom_emoji_id))return!0}else if(c.type==="paid"){if(s)return!0}else return!0}return!1}},chatType(r){const e=new Set(qt(r));return t=>{var n;return((n=t.chat)==null?void 0:n.type)!==void 0&&e.has(t.chat.type)}},callbackQuery(r){const e=le.filterQuery("callback_query:data"),t=Ne(r);return n=>e(n)&&je(n,n.callbackQuery.data,t)},gameQuery(r){const e=le.filterQuery("callback_query:game_short_name"),t=Ne(r);return n=>e(n)&&je(n,n.callbackQuery.game_short_name,t)},inlineQuery(r){const e=le.filterQuery("inline_query"),t=Ne(r);return n=>e(n)&&je(n,n.inlineQuery.query,t)},chosenInlineResult(r){const e=le.filterQuery("chosen_inline_result"),t=Ne(r);return n=>e(n)&&je(n,n.chosenInlineResult.result_id,t)},preCheckoutQuery(r){const e=le.filterQuery("pre_checkout_query"),t=Ne(r);return n=>e(n)&&je(n,n.preCheckoutQuery.invoice_payload,t)},shippingQuery(r){const e=le.filterQuery("shipping_query"),t=Ne(r);return n=>e(n)&&je(n,n.shippingQuery.invoice_payload,t)}},K=class K{constructor(e,t,n){E(this,"update");E(this,"api");E(this,"me");E(this,"match");this.update=e,this.api=t,this.me=n}get message(){return this.update.message}get editedMessage(){return this.update.edited_message}get channelPost(){return this.update.channel_post}get editedChannelPost(){return this.update.edited_channel_post}get businessConnection(){return this.update.business_connection}get businessMessage(){return this.update.business_message}get editedBusinessMessage(){return this.update.edited_business_message}get deletedBusinessMessages(){return this.update.deleted_business_messages}get messageReaction(){return this.update.message_reaction}get messageReactionCount(){return this.update.message_reaction_count}get inlineQuery(){return this.update.inline_query}get chosenInlineResult(){return this.update.chosen_inline_result}get callbackQuery(){return this.update.callback_query}get shippingQuery(){return this.update.shipping_query}get preCheckoutQuery(){return this.update.pre_checkout_query}get poll(){return this.update.poll}get pollAnswer(){return this.update.poll_answer}get myChatMember(){return this.update.my_chat_member}get chatMember(){return this.update.chat_member}get chatJoinRequest(){return this.update.chat_join_request}get chatBoost(){return this.update.chat_boost}get removedChatBoost(){return this.update.removed_chat_boost}get purchasedPaidMedia(){return this.update.purchased_paid_media}get msg(){var e;return this.message??this.editedMessage??this.channelPost??this.editedChannelPost??this.businessMessage??this.editedBusinessMessage??((e=this.callbackQuery)==null?void 0:e.message)}get chat(){var e;return(e=this.msg??this.deletedBusinessMessages??this.messageReaction??this.messageReactionCount??this.myChatMember??this.chatMember??this.chatJoinRequest??this.chatBoost??this.removedChatBoost)==null?void 0:e.chat}get senderChat(){var e;return(e=this.msg)==null?void 0:e.sender_chat}get from(){var e,t,n,i;return((n=this.businessConnection??this.messageReaction??((t=((e=this.chatBoost)==null?void 0:e.boost)??this.removedChatBoost)==null?void 0:t.source))==null?void 0:n.user)??((i=this.callbackQuery??this.msg??this.inlineQuery??this.chosenInlineResult??this.shippingQuery??this.preCheckoutQuery??this.myChatMember??this.chatMember??this.chatJoinRequest??this.purchasedPaidMedia)==null?void 0:i.from)}get msgId(){var e,t,n;return((e=this.msg)==null?void 0:e.message_id)??((t=this.messageReaction)==null?void 0:t.message_id)??((n=this.messageReactionCount)==null?void 0:n.message_id)}get chatId(){var e,t;return((e=this.chat)==null?void 0:e.id)??((t=this.businessConnection)==null?void 0:t.user_chat_id)}get inlineMessageId(){var e,t;return((e=this.callbackQuery)==null?void 0:e.inline_message_id)??((t=this.chosenInlineResult)==null?void 0:t.inline_message_id)}get businessConnectionId(){var e,t,n;return((e=this.msg)==null?void 0:e.business_connection_id)??((t=this.businessConnection)==null?void 0:t.id)??((n=this.deletedBusinessMessages)==null?void 0:n.business_connection_id)}entities(e){const t=this.msg;if(t===void 0)return[];const n=t.text??t.caption;if(n===void 0)return[];let i=t.entities??t.caption_entities;if(i===void 0)return[];if(e!==void 0){const s=new Set(qt(e));i=i.filter(o=>s.has(o.type))}return i.map(s=>({...s,text:n.substring(s.offset,s.offset+s.length)}))}reactions(){const e=[],t=[],n=[],i=[],s=[],o=[],d=[],a=[];let c=!1,l=!1;const u=this.messageReaction;if(u!==void 0){const{old_reaction:h,new_reaction:p}=u;for(const m of p)m.type==="emoji"?e.push(m.emoji):m.type==="custom_emoji"?s.push(m.custom_emoji_id):m.type==="paid"&&(c=l=!0);for(const m of h)m.type==="emoji"?i.push(m.emoji):m.type==="custom_emoji"?a.push(m.custom_emoji_id):m.type==="paid"&&(l=!1);t.push(...e),o.push(...s);for(let m=0;m<i.length;m++){const g=t.length;if(g===0)break;const y=i[m];for(let M=0;M<g;M++)if(y===t[M]){n.push(y),i.splice(m,1),t.splice(M,1),m--;break}}for(let m=0;m<a.length;m++){const g=o.length;if(g===0)break;const y=a[m];for(let M=0;M<g;M++)if(y===o[M]){d.push(y),a.splice(m,1),o.splice(M,1),m--;break}}}return{emoji:e,emojiAdded:t,emojiKept:n,emojiRemoved:i,customEmoji:s,customEmojiAdded:o,customEmojiKept:d,customEmojiRemoved:a,paid:c,paidAdded:l}}has(e){return K.has.filterQuery(e)(this)}hasText(e){return K.has.text(e)(this)}hasCommand(e){return K.has.command(e)(this)}hasReaction(e){return K.has.reaction(e)(this)}hasChatType(e){return K.has.chatType(e)(this)}hasCallbackQuery(e){return K.has.callbackQuery(e)(this)}hasGameQuery(e){return K.has.gameQuery(e)(this)}hasInlineQuery(e){return K.has.inlineQuery(e)(this)}hasChosenInlineResult(e){return K.has.chosenInlineResult(e)(this)}hasPreCheckoutQuery(e){return K.has.preCheckoutQuery(e)(this)}hasShippingQuery(e){return K.has.shippingQuery(e)(this)}reply(e,t,n){return this.api.sendMessage(f(this.chatId,"sendMessage"),e,{business_connection_id:this.businessConnectionId,...t},n)}forwardMessage(e,t,n){return this.api.forwardMessage(e,f(this.chatId,"forwardMessage"),f(this.msgId,"forwardMessage"),t,n)}forwardMessages(e,t,n,i){return this.api.forwardMessages(e,f(this.chatId,"forwardMessages"),t,n,i)}copyMessage(e,t,n){return this.api.copyMessage(e,f(this.chatId,"copyMessage"),f(this.msgId,"copyMessage"),t,n)}copyMessages(e,t,n,i){return this.api.copyMessages(e,f(this.chatId,"copyMessages"),t,n,i)}replyWithPhoto(e,t,n){return this.api.sendPhoto(f(this.chatId,"sendPhoto"),e,{business_connection_id:this.businessConnectionId,...t},n)}replyWithAudio(e,t,n){return this.api.sendAudio(f(this.chatId,"sendAudio"),e,{business_connection_id:this.businessConnectionId,...t},n)}replyWithDocument(e,t,n){return this.api.sendDocument(f(this.chatId,"sendDocument"),e,{business_connection_id:this.businessConnectionId,...t},n)}replyWithVideo(e,t,n){return this.api.sendVideo(f(this.chatId,"sendVideo"),e,{business_connection_id:this.businessConnectionId,...t},n)}replyWithAnimation(e,t,n){return this.api.sendAnimation(f(this.chatId,"sendAnimation"),e,{business_connection_id:this.businessConnectionId,...t},n)}replyWithVoice(e,t,n){return this.api.sendVoice(f(this.chatId,"sendVoice"),e,{business_connection_id:this.businessConnectionId,...t},n)}replyWithVideoNote(e,t,n){return this.api.sendVideoNote(f(this.chatId,"sendVideoNote"),e,{business_connection_id:this.businessConnectionId,...t},n)}replyWithMediaGroup(e,t,n){return this.api.sendMediaGroup(f(this.chatId,"sendMediaGroup"),e,{business_connection_id:this.businessConnectionId,...t},n)}replyWithLocation(e,t,n,i){return this.api.sendLocation(f(this.chatId,"sendLocation"),e,t,{business_connection_id:this.businessConnectionId,...n},i)}editMessageLiveLocation(e,t,n,i){const s=this.inlineMessageId;return s!==void 0?this.api.editMessageLiveLocationInline(s,e,t,n):this.api.editMessageLiveLocation(f(this.chatId,"editMessageLiveLocation"),f(this.msgId,"editMessageLiveLocation"),e,t,n,i)}stopMessageLiveLocation(e,t){const n=this.inlineMessageId;return n!==void 0?this.api.stopMessageLiveLocationInline(n,e):this.api.stopMessageLiveLocation(f(this.chatId,"stopMessageLiveLocation"),f(this.msgId,"stopMessageLiveLocation"),e,t)}sendPaidMedia(e,t,n,i){return this.api.sendPaidMedia(f(this.chatId,"sendPaidMedia"),e,t,n,i)}replyWithVenue(e,t,n,i,s,o){return this.api.sendVenue(f(this.chatId,"sendVenue"),e,t,n,i,{business_connection_id:this.businessConnectionId,...s},o)}replyWithContact(e,t,n,i){return this.api.sendContact(f(this.chatId,"sendContact"),e,t,{business_connection_id:this.businessConnectionId,...n},i)}replyWithPoll(e,t,n,i){return this.api.sendPoll(f(this.chatId,"sendPoll"),e,t,{business_connection_id:this.businessConnectionId,...n},i)}replyWithDice(e,t,n){return this.api.sendDice(f(this.chatId,"sendDice"),e,{business_connection_id:this.businessConnectionId,...t},n)}replyWithChatAction(e,t,n){return this.api.sendChatAction(f(this.chatId,"sendChatAction"),e,{business_connection_id:this.businessConnectionId,...t},n)}react(e,t,n){return this.api.setMessageReaction(f(this.chatId,"setMessageReaction"),f(this.msgId,"setMessageReaction"),typeof e=="string"?[{type:"emoji",emoji:e}]:(Array.isArray(e)?e:[e]).map(i=>typeof i=="string"?{type:"emoji",emoji:i}:i),t,n)}getUserProfilePhotos(e,t){return this.api.getUserProfilePhotos(f(this.from,"getUserProfilePhotos").id,e,t)}setUserEmojiStatus(e,t){return this.api.setUserEmojiStatus(f(this.from,"setUserEmojiStatus").id,e,t)}getUserChatBoosts(e,t){return this.api.getUserChatBoosts(e,f(this.from,"getUserChatBoosts").id,t)}getBusinessConnection(e){return this.api.getBusinessConnection(f(this.businessConnectionId,"getBusinessConnection"),e)}getFile(e){const t=f(this.msg,"getFile"),n=t.photo!==void 0?t.photo[t.photo.length-1]:t.animation??t.audio??t.document??t.video??t.video_note??t.voice??t.sticker;return this.api.getFile(f(n,"getFile").file_id,e)}kickAuthor(...e){return this.banAuthor(...e)}banAuthor(e,t){return this.api.banChatMember(f(this.chatId,"banAuthor"),f(this.from,"banAuthor").id,e,t)}kickChatMember(...e){return this.banChatMember(...e)}banChatMember(e,t,n){return this.api.banChatMember(f(this.chatId,"banChatMember"),e,t,n)}unbanChatMember(e,t,n){return this.api.unbanChatMember(f(this.chatId,"unbanChatMember"),e,t,n)}restrictAuthor(e,t,n){return this.api.restrictChatMember(f(this.chatId,"restrictAuthor"),f(this.from,"restrictAuthor").id,e,t,n)}restrictChatMember(e,t,n,i){return this.api.restrictChatMember(f(this.chatId,"restrictChatMember"),e,t,n,i)}promoteAuthor(e,t){return this.api.promoteChatMember(f(this.chatId,"promoteAuthor"),f(this.from,"promoteAuthor").id,e,t)}promoteChatMember(e,t,n){return this.api.promoteChatMember(f(this.chatId,"promoteChatMember"),e,t,n)}setChatAdministratorAuthorCustomTitle(e,t){return this.api.setChatAdministratorCustomTitle(f(this.chatId,"setChatAdministratorAuthorCustomTitle"),f(this.from,"setChatAdministratorAuthorCustomTitle").id,e,t)}setChatAdministratorCustomTitle(e,t,n){return this.api.setChatAdministratorCustomTitle(f(this.chatId,"setChatAdministratorCustomTitle"),e,t,n)}banChatSenderChat(e,t){return this.api.banChatSenderChat(f(this.chatId,"banChatSenderChat"),e,t)}unbanChatSenderChat(e,t){return this.api.unbanChatSenderChat(f(this.chatId,"unbanChatSenderChat"),e,t)}setChatPermissions(e,t,n){return this.api.setChatPermissions(f(this.chatId,"setChatPermissions"),e,t,n)}exportChatInviteLink(e){return this.api.exportChatInviteLink(f(this.chatId,"exportChatInviteLink"),e)}createChatInviteLink(e,t){return this.api.createChatInviteLink(f(this.chatId,"createChatInviteLink"),e,t)}editChatInviteLink(e,t,n){return this.api.editChatInviteLink(f(this.chatId,"editChatInviteLink"),e,t,n)}createChatSubscriptionInviteLink(e,t,n,i){return this.api.createChatSubscriptionInviteLink(f(this.chatId,"createChatSubscriptionInviteLink"),e,t,n,i)}editChatSubscriptionInviteLink(e,t,n){return this.api.editChatSubscriptionInviteLink(f(this.chatId,"editChatSubscriptionInviteLink"),e,t,n)}revokeChatInviteLink(e,t){return this.api.revokeChatInviteLink(f(this.chatId,"editChatInviteLink"),e,t)}approveChatJoinRequest(e,t){return this.api.approveChatJoinRequest(f(this.chatId,"approveChatJoinRequest"),e,t)}declineChatJoinRequest(e,t){return this.api.declineChatJoinRequest(f(this.chatId,"declineChatJoinRequest"),e,t)}setChatPhoto(e,t){return this.api.setChatPhoto(f(this.chatId,"setChatPhoto"),e,t)}deleteChatPhoto(e){return this.api.deleteChatPhoto(f(this.chatId,"deleteChatPhoto"),e)}setChatTitle(e,t){return this.api.setChatTitle(f(this.chatId,"setChatTitle"),e,t)}setChatDescription(e,t){return this.api.setChatDescription(f(this.chatId,"setChatDescription"),e,t)}pinChatMessage(e,t,n){return this.api.pinChatMessage(f(this.chatId,"pinChatMessage"),e,t,n)}unpinChatMessage(e,t){return this.api.unpinChatMessage(f(this.chatId,"unpinChatMessage"),e,t)}unpinAllChatMessages(e){return this.api.unpinAllChatMessages(f(this.chatId,"unpinAllChatMessages"),e)}leaveChat(e){return this.api.leaveChat(f(this.chatId,"leaveChat"),e)}getChat(e){return this.api.getChat(f(this.chatId,"getChat"),e)}getChatAdministrators(e){return this.api.getChatAdministrators(f(this.chatId,"getChatAdministrators"),e)}getChatMembersCount(...e){return this.getChatMemberCount(...e)}getChatMemberCount(e){return this.api.getChatMemberCount(f(this.chatId,"getChatMemberCount"),e)}getAuthor(e){return this.api.getChatMember(f(this.chatId,"getAuthor"),f(this.from,"getAuthor").id,e)}getChatMember(e,t){return this.api.getChatMember(f(this.chatId,"getChatMember"),e,t)}setChatStickerSet(e,t){return this.api.setChatStickerSet(f(this.chatId,"setChatStickerSet"),e,t)}deleteChatStickerSet(e){return this.api.deleteChatStickerSet(f(this.chatId,"deleteChatStickerSet"),e)}createForumTopic(e,t,n){return this.api.createForumTopic(f(this.chatId,"createForumTopic"),e,t,n)}editForumTopic(e,t){const n=f(this.msg,"editForumTopic"),i=f(n.message_thread_id,"editForumTopic");return this.api.editForumTopic(n.chat.id,i,e,t)}closeForumTopic(e){const t=f(this.msg,"closeForumTopic"),n=f(t.message_thread_id,"closeForumTopic");return this.api.closeForumTopic(t.chat.id,n,e)}reopenForumTopic(e){const t=f(this.msg,"reopenForumTopic"),n=f(t.message_thread_id,"reopenForumTopic");return this.api.reopenForumTopic(t.chat.id,n,e)}deleteForumTopic(e){const t=f(this.msg,"deleteForumTopic"),n=f(t.message_thread_id,"deleteForumTopic");return this.api.deleteForumTopic(t.chat.id,n,e)}unpinAllForumTopicMessages(e){const t=f(this.msg,"unpinAllForumTopicMessages"),n=f(t.message_thread_id,"unpinAllForumTopicMessages");return this.api.unpinAllForumTopicMessages(t.chat.id,n,e)}editGeneralForumTopic(e,t){return this.api.editGeneralForumTopic(f(this.chatId,"editGeneralForumTopic"),e,t)}closeGeneralForumTopic(e){return this.api.closeGeneralForumTopic(f(this.chatId,"closeGeneralForumTopic"),e)}reopenGeneralForumTopic(e){return this.api.reopenGeneralForumTopic(f(this.chatId,"reopenGeneralForumTopic"),e)}hideGeneralForumTopic(e){return this.api.hideGeneralForumTopic(f(this.chatId,"hideGeneralForumTopic"),e)}unhideGeneralForumTopic(e){return this.api.unhideGeneralForumTopic(f(this.chatId,"unhideGeneralForumTopic"),e)}unpinAllGeneralForumTopicMessages(e){return this.api.unpinAllGeneralForumTopicMessages(f(this.chatId,"unpinAllGeneralForumTopicMessages"),e)}answerCallbackQuery(e,t){return this.api.answerCallbackQuery(f(this.callbackQuery,"answerCallbackQuery").id,typeof e=="string"?{text:e}:e,t)}setChatMenuButton(e,t){return this.api.setChatMenuButton(e,t)}getChatMenuButton(e,t){return this.api.getChatMenuButton(e,t)}setMyDefaultAdministratorRights(e,t){return this.api.setMyDefaultAdministratorRights(e,t)}getMyDefaultAdministratorRights(e,t){return this.api.getMyDefaultAdministratorRights(e,t)}editMessageText(e,t,n){var s,o,d;const i=this.inlineMessageId;return i!==void 0?this.api.editMessageTextInline(i,e,t):this.api.editMessageText(f(this.chatId,"editMessageText"),f(((s=this.msg)==null?void 0:s.message_id)??((o=this.messageReaction)==null?void 0:o.message_id)??((d=this.messageReactionCount)==null?void 0:d.message_id),"editMessageText"),e,t,n)}editMessageCaption(e,t){var i,s,o;const n=this.inlineMessageId;return n!==void 0?this.api.editMessageCaptionInline(n,e):this.api.editMessageCaption(f(this.chatId,"editMessageCaption"),f(((i=this.msg)==null?void 0:i.message_id)??((s=this.messageReaction)==null?void 0:s.message_id)??((o=this.messageReactionCount)==null?void 0:o.message_id),"editMessageCaption"),e,t)}editMessageMedia(e,t,n){var s,o,d;const i=this.inlineMessageId;return i!==void 0?this.api.editMessageMediaInline(i,e,t):this.api.editMessageMedia(f(this.chatId,"editMessageMedia"),f(((s=this.msg)==null?void 0:s.message_id)??((o=this.messageReaction)==null?void 0:o.message_id)??((d=this.messageReactionCount)==null?void 0:d.message_id),"editMessageMedia"),e,t,n)}editMessageReplyMarkup(e,t){var i,s,o;const n=this.inlineMessageId;return n!==void 0?this.api.editMessageReplyMarkupInline(n,e):this.api.editMessageReplyMarkup(f(this.chatId,"editMessageReplyMarkup"),f(((i=this.msg)==null?void 0:i.message_id)??((s=this.messageReaction)==null?void 0:s.message_id)??((o=this.messageReactionCount)==null?void 0:o.message_id),"editMessageReplyMarkup"),e,t)}stopPoll(e,t){var n,i,s;return this.api.stopPoll(f(this.chatId,"stopPoll"),f(((n=this.msg)==null?void 0:n.message_id)??((i=this.messageReaction)==null?void 0:i.message_id)??((s=this.messageReactionCount)==null?void 0:s.message_id),"stopPoll"),e,t)}deleteMessage(e){var t,n,i;return this.api.deleteMessage(f(this.chatId,"deleteMessage"),f(((t=this.msg)==null?void 0:t.message_id)??((n=this.messageReaction)==null?void 0:n.message_id)??((i=this.messageReactionCount)==null?void 0:i.message_id),"deleteMessage"),e)}deleteMessages(e,t){return this.api.deleteMessages(f(this.chatId,"deleteMessages"),e,t)}replyWithSticker(e,t,n){return this.api.sendSticker(f(this.chatId,"sendSticker"),e,{business_connection_id:this.businessConnectionId,...t},n)}getCustomEmojiStickers(e){var t;return this.api.getCustomEmojiStickers((((t=this.msg)==null?void 0:t.entities)??[]).filter(n=>n.type==="custom_emoji").map(n=>n.custom_emoji_id),e)}replyWithGift(e,t,n){return this.api.sendGift(f(this.from,"sendGift").id,e,t,n)}answerInlineQuery(e,t,n){return this.api.answerInlineQuery(f(this.inlineQuery,"answerInlineQuery").id,e,t,n)}savePreparedInlineMessage(e,t,n){return this.api.savePreparedInlineMessage(f(this.from,"savePreparedInlineMessage").id,e,t,n)}replyWithInvoice(e,t,n,i,s,o,d){return this.api.sendInvoice(f(this.chatId,"sendInvoice"),e,t,n,i,s,o,d)}answerShippingQuery(e,t,n){return this.api.answerShippingQuery(f(this.shippingQuery,"answerShippingQuery").id,e,t,n)}answerPreCheckoutQuery(e,t,n){return this.api.answerPreCheckoutQuery(f(this.preCheckoutQuery,"answerPreCheckoutQuery").id,e,typeof t=="string"?{error_message:t}:t,n)}refundStarPayment(e){var t;return this.api.refundStarPayment(f(this.from,"refundStarPayment").id,f((t=this.msg)==null?void 0:t.successful_payment,"refundStarPayment").telegram_payment_charge_id,e)}editUserStarSubscription(e,t,n){return this.api.editUserStarSubscription(f(this.from,"editUserStarSubscription").id,e,t,n)}verifyUser(e,t){return this.api.verifyUser(f(this.from,"verifyUser").id,e,t)}verifyChat(e,t){return this.api.verifyChat(f(this.chatId,"verifyChat"),e,t)}removeUserVerification(e){return this.api.removeUserVerification(f(this.from,"removeUserVerification").id,e)}removeChatVerification(e){return this.api.removeChatVerification(f(this.chatId,"removeChatVerification"),e)}setPassportDataErrors(e,t){return this.api.setPassportDataErrors(f(this.from,"setPassportDataErrors").id,e,t)}replyWithGame(e,t,n){return this.api.sendGame(f(this.chatId,"sendGame"),e,{business_connection_id:this.businessConnectionId,...t},n)}};E(K,"has",le);let H=K;function f(r,e){if(r===void 0)throw new Error(`Missing information for API call to ${e}`);return r}function Ne(r){return qt(r).map(e=>typeof e=="string"?t=>t===e?e:null:t=>t.match(e))}function je(r,e,t){for(const n of t){const i=n(e);if(i)return r.match=i,!0}return!1}function qt(r){return Array.isArray(r)?r:[r]}class hr extends Error{constructor(t,n){super(to(t));E(this,"error");E(this,"ctx");this.error=t,this.ctx=n,this.name="BotError",t instanceof Error&&(this.stack=t.stack)}}function to(r){let e;if(r instanceof Error)e=`${r.name} in middleware: ${r.message}`;else{const t=typeof r;switch(e=`Non-error value of type ${t} thrown in middleware`,t){case"bigint":case"boolean":case"number":case"symbol":e+=`: ${r}`;break;case"string":e+=`: ${String(r).substring(0,50)}`;break;default:e+="!";break}}return e}function wt(r){return typeof r=="function"?r:(e,t)=>r.middleware()(e,t)}function rn(r,e){return async(t,n)=>{let i=!1;await r(t,async()=>{if(i)throw new Error("`next` already called before!");i=!0,await e(t,n)})}}function tr(r,e){return e()}const ro=()=>Promise.resolve();async function Hn(r,e){await r(e,ro)}class Ue{constructor(...e){E(this,"handler");this.handler=e.length===0?tr:e.map(wt).reduce(rn)}middleware(){return this.handler}use(...e){const t=new Ue(...e);return this.handler=rn(this.handler,wt(t)),t}on(e,...t){return this.filter(H.has.filterQuery(e),...t)}hears(e,...t){return this.filter(H.has.text(e),...t)}command(e,...t){return this.filter(H.has.command(e),...t)}reaction(e,...t){return this.filter(H.has.reaction(e),...t)}chatType(e,...t){return this.filter(H.has.chatType(e),...t)}callbackQuery(e,...t){return this.filter(H.has.callbackQuery(e),...t)}gameQuery(e,...t){return this.filter(H.has.gameQuery(e),...t)}inlineQuery(e,...t){return this.filter(H.has.inlineQuery(e),...t)}chosenInlineResult(e,...t){return this.filter(H.has.chosenInlineResult(e),...t)}preCheckoutQuery(e,...t){return this.filter(H.has.preCheckoutQuery(e),...t)}shippingQuery(e,...t){return this.filter(H.has.shippingQuery(e),...t)}filter(e,...t){const n=new Ue(...t);return this.branch(e,n,tr),n}drop(e,...t){return this.filter(async n=>!await e(n),...t)}fork(...e){const t=new Ue(...e),n=wt(t);return this.use((i,s)=>Promise.all([s(),Hn(n,i)])),t}lazy(e){return this.use(async(t,n)=>{const i=await e(t),s=Array.isArray(i)?i:[i];await wt(new Ue(...s))(t,n)})}route(e,t,n=tr){return this.lazy(async i=>{const s=await e(i);return(s===void 0||!t[s]?n:t[s])??[]})}branch(e,t,n){return this.lazy(async i=>await e(i)?t:n)}errorBoundary(e,...t){const n=new Ue(...t),i=wt(n);return this.use(async(s,o)=>{let d=!1;const a=()=>(d=!0,Promise.resolve());try{await i(s,a)}catch(c){d=!1,await e(new hr(c,s),a)}d&&await o()}),n}}var lt=1e3,ct=lt*60,dt=ct*60,qe=dt*24,no=qe*7,io=qe*365.25,so=function(r,e){e=e||{};var t=typeof r;if(t==="string"&&r.length>0)return oo(r);if(t==="number"&&isFinite(r))return e.long?uo(r):ao(r);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(r))};function oo(r){if(r=String(r),!(r.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(r);if(e){var t=parseFloat(e[1]),n=(e[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return t*io;case"weeks":case"week":case"w":return t*no;case"days":case"day":case"d":return t*qe;case"hours":case"hour":case"hrs":case"hr":case"h":return t*dt;case"minutes":case"minute":case"mins":case"min":case"m":return t*ct;case"seconds":case"second":case"secs":case"sec":case"s":return t*lt;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return t;default:return}}}}function ao(r){var e=Math.abs(r);return e>=qe?Math.round(r/qe)+"d":e>=dt?Math.round(r/dt)+"h":e>=ct?Math.round(r/ct)+"m":e>=lt?Math.round(r/lt)+"s":r+"ms"}function uo(r){var e=Math.abs(r);return e>=qe?Rt(r,e,qe,"day"):e>=dt?Rt(r,e,dt,"hour"):e>=ct?Rt(r,e,ct,"minute"):e>=lt?Rt(r,e,lt,"second"):r+" ms"}function Rt(r,e,t,n){var i=e>=t*1.5;return Math.round(r/t)+" "+n+(i?"s":"")}function Jn(){throw new Error("setTimeout has not been defined")}function Zn(){throw new Error("clearTimeout has not been defined")}var Me=Jn,ke=Zn,it;typeof window<"u"?it=window:typeof self<"u"?it=self:it={};typeof it.setTimeout=="function"&&(Me=setTimeout);typeof it.clearTimeout=="function"&&(ke=clearTimeout);function Xn(r){if(Me===setTimeout)return setTimeout(r,0);if((Me===Jn||!Me)&&setTimeout)return Me=setTimeout,setTimeout(r,0);try{return Me(r,0)}catch{try{return Me.call(null,r,0)}catch{return Me.call(this,r,0)}}}function lo(r){if(ke===clearTimeout)return clearTimeout(r);if((ke===Zn||!ke)&&clearTimeout)return ke=clearTimeout,clearTimeout(r);try{return ke(r)}catch{try{return ke.call(null,r)}catch{return ke.call(this,r)}}}var ve=[],st=!1,Be,jt=-1;function co(){!st||!Be||(st=!1,Be.length?ve=Be.concat(ve):jt=-1,ve.length&&ei())}function ei(){if(!st){var r=Xn(co);st=!0;for(var e=ve.length;e;){for(Be=ve,ve=[];++jt<e;)Be&&Be[jt].run();jt=-1,e=ve.length}Be=null,st=!1,lo(r)}}function ho(r){var e=new Array(arguments.length-1);if(arguments.length>1)for(var t=1;t<arguments.length;t++)e[t-1]=arguments[t];ve.push(new ti(r,e)),ve.length===1&&!st&&Xn(ei)}function ti(r,e){this.fun=r,this.array=e}ti.prototype.run=function(){this.fun.apply(null,this.array)};var fo="browser",po="browser",mo=!0,go=[],vo="",_o={},yo={},wo={};function Ye(){}var bo=Ye,Co=Ye,Mo=Ye,ko=Ye,So=Ye,Io=Ye,To=Ye;function Eo(r){throw new Error("process.binding is not supported")}function Ao(){return"/"}function xo(r){throw new Error("process.chdir is not supported")}function Fo(){return 0}var tt=it.performance||{},Po=tt.now||tt.mozNow||tt.msNow||tt.oNow||tt.webkitNow||function(){return new Date().getTime()};function Ro(r){var e=Po.call(tt)*.001,t=Math.floor(e),n=Math.floor(e%1*1e9);return r&&(t=t-r[0],n=n-r[1],n<0&&(t--,n+=1e9)),[t,n]}var $o=new Date;function Lo(){var r=new Date,e=r-$o;return e/1e3}var rr={nextTick:ho,title:fo,browser:mo,env:{NODE_ENV:"production"},argv:go,version:vo,versions:_o,on:bo,addListener:Co,once:Mo,off:ko,removeListener:So,removeAllListeners:Io,emit:To,binding:Eo,cwd:Ao,chdir:xo,umask:Fo,hrtime:Ro,platform:po,release:yo,config:wo,uptime:Lo};function No(r,e,t){return t={path:e,exports:{},require:function(n,i){return jo(n,i??t.path)}},r(t,t.exports),t.exports}function jo(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}function Uo(r){t.debug=t,t.default=t,t.coerce=a,t.disable=s,t.enable=i,t.enabled=o,t.humanize=so,t.destroy=c,Object.keys(r).forEach(l=>{t[l]=r[l]}),t.names=[],t.skips=[],t.formatters={};function e(l){let u=0;for(let h=0;h<l.length;h++)u=(u<<5)-u+l.charCodeAt(h),u|=0;return t.colors[Math.abs(u)%t.colors.length]}t.selectColor=e;function t(l){let u,h=null,p,m;function g(...y){if(!g.enabled)return;const M=g,C=Number(new Date),w=C-(u||C);M.diff=w,M.prev=u,M.curr=C,u=C,y[0]=t.coerce(y[0]),typeof y[0]!="string"&&y.unshift("%O");let I=0;y[0]=y[0].replace(/%([a-zA-Z%])/g,(b,F)=>{if(b==="%%")return"%";I++;const T=t.formatters[F];if(typeof T=="function"){const U=y[I];b=T.call(M,U),y.splice(I,1),I--}return b}),t.formatArgs.call(M,y),(M.log||t.log).apply(M,y)}return g.namespace=l,g.useColors=t.useColors(),g.color=t.selectColor(l),g.extend=n,g.destroy=t.destroy,Object.defineProperty(g,"enabled",{enumerable:!0,configurable:!1,get:()=>h!==null?h:(p!==t.namespaces&&(p=t.namespaces,m=t.enabled(l)),m),set:y=>{h=y}}),typeof t.init=="function"&&t.init(g),g}function n(l,u){const h=t(this.namespace+(typeof u>"u"?":":u)+l);return h.log=this.log,h}function i(l){t.save(l),t.namespaces=l,t.names=[],t.skips=[];let u;const h=(typeof l=="string"?l:"").split(/[\s,]+/),p=h.length;for(u=0;u<p;u++)h[u]&&(l=h[u].replace(/\*/g,".*?"),l[0]==="-"?t.skips.push(new RegExp("^"+l.slice(1)+"$")):t.names.push(new RegExp("^"+l+"$")))}function s(){const l=[...t.names.map(d),...t.skips.map(d).map(u=>"-"+u)].join(",");return t.enable(""),l}function o(l){if(l[l.length-1]==="*")return!0;let u,h;for(u=0,h=t.skips.length;u<h;u++)if(t.skips[u].test(l))return!1;for(u=0,h=t.names.length;u<h;u++)if(t.names[u].test(l))return!0;return!1}function d(l){return l.toString().substring(2,l.toString().length-2).replace(/\.\*\?$/,"*")}function a(l){return l instanceof Error?l.stack||l.message:l}function c(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return t.enable(t.load()),t}var Do=Uo,z=No(function(r,e){e.formatArgs=n,e.save=i,e.load=s,e.useColors=t,e.storage=o(),e.destroy=(()=>{let a=!1;return()=>{a||(a=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function t(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function n(a){if(a[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+a[0]+(this.useColors?"%c ":" ")+"+"+r.exports.humanize(this.diff),!this.useColors)return;const c="color: "+this.color;a.splice(1,0,c,"color: inherit");let l=0,u=0;a[0].replace(/%[a-zA-Z%]/g,h=>{h!=="%%"&&(l++,h==="%c"&&(u=l))}),a.splice(u,0,c)}e.log=console.debug||console.log||(()=>{});function i(a){try{a?e.storage.setItem("debug",a):e.storage.removeItem("debug")}catch{}}function s(){let a;try{a=e.storage.getItem("debug")}catch{}return!a&&typeof rr<"u"&&"env"in rr&&(a=rr.env.DEBUG),a}function o(){try{return localStorage}catch{}}r.exports=Do(e);const{formatters:d}=r.exports;d.j=function(a){try{return JSON.stringify(a)}catch(c){return"[UnexpectedJSONParseError]: "+c.message}}});z.colors;z.destroy;z.formatArgs;z.load;z.log;z.save;z.storage;z.useColors;const Oo=r=>{const e=r[Symbol.asyncIterator]();return new ReadableStream({async pull(t){const n=await e.next();n.done?t.close():t.enqueue(n.value)}})},Bo=r=>({}),nn=z("grammy:warn");class Rr extends Error{constructor(t,n,i,s){super(`${t} (${n.error_code}: ${n.description})`);E(this,"method");E(this,"payload");E(this,"ok");E(this,"error_code");E(this,"description");E(this,"parameters");this.method=i,this.payload=s,this.ok=!1,this.name="GrammyError",this.error_code=n.error_code,this.description=n.description,this.parameters=n.parameters??{}}}function Qo(r,e,t){switch(r.error_code){case 401:nn("Error 401 means that your bot token is wrong, talk to https://t.me/BotFather to check it.");break;case 409:nn("Error 409 means that you are running your bot several times on long polling. Consider revoking the bot token if you believe that no other instance is running.");break}return new Rr(`Call to '${e}' failed!`,r,e,t)}class ri extends Error{constructor(t,n){super(t);E(this,"error");this.error=n,this.name="HttpError"}}function Go(r){return typeof r=="object"&&r!==null&&"status"in r&&"statusText"in r}function qo(r,e){return t=>{let n=`Network request for '${r}' failed!`;throw Go(t)&&(n+=` (${t.status}: ${t.statusText})`),e&&t instanceof Error&&(n+=` ${t.message}`),new ri(n,t)}}const Wo=(()=>{var t,n,i;const{Deno:r}=globalThis;if(typeof((t=r==null?void 0:r.build)==null?void 0:t.os)=="string")return r.build.os;const{navigator:e}=globalThis;return(i=(n=e==null?void 0:e.appVersion)==null?void 0:n.includes)!=null&&i.call(n,"Win")?"windows":"linux"})(),Vo=Wo==="windows";function zo(r){if(typeof r!="string")throw new TypeError(`Path must be a string. Received ${JSON.stringify(r)}`)}function ni(r,e){if(e.length>=r.length)return r;const t=r.length-e.length;for(let n=e.length-1;n>=0;--n)if(r.charCodeAt(t+n)!==e.charCodeAt(n))return r;return r.slice(0,-e.length)}function ii(r,e,t=0){let n=!1,i=r.length;for(let s=r.length-1;s>=t;--s)if(e(r.charCodeAt(s))){if(n){t=s+1;break}}else n||(n=!0,i=s+1);return r.slice(t,i)}function si(r,e){if(zo(r),r.length===0)return r;if(typeof e!="string")throw new TypeError(`Suffix must be a string. Received ${JSON.stringify(e)}`)}function oi(r,e){if(r.length<=1)return r;let t=r.length;for(let n=r.length-1;n>0&&e(r.charCodeAt(n));n--)t=n;return r.slice(0,t)}function sn(r){return r===47}function Yo(r,e=""){si(r,e);const t=ii(r,sn),n=oi(t,sn);return e?ni(n,e):n}function on(r){return r===47||r===92}function Ko(r){return r>=97&&r<=122||r>=65&&r<=90}function Ho(r,e=""){si(r,e);let t=0;if(r.length>=2){const s=r.charCodeAt(0);Ko(s)&&r.charCodeAt(1)===58&&(t=2)}const n=ii(r,on,t),i=oi(n,on);return e?ni(i,e):i}function $t(r,e=""){return Vo?Ho(r,e):Yo(r,e)}class fr{constructor(e,t){E(this,"consumed",!1);E(this,"fileData");E(this,"filename");this.fileData=e,t??(t=this.guessFilename(e)),this.filename=t}guessFilename(e){if(typeof e=="string")return $t(e);if(typeof e=="object"){if("url"in e)return $t(e.url);if(e instanceof URL)return $t(e.pathname)||$t(e.hostname)}}toRaw(){if(this.consumed)throw new Error("Cannot reuse InputFile data source!");const e=this.fileData;return e instanceof Blob?e.stream():e instanceof URL?an(e):"url"in e?an(e.url):(e instanceof Uint8Array||(this.consumed=!0),e)}}async function*an(r){const{body:e}=await fetch(r);if(e===null)throw new Error(`Download failed, no response body from '${r}'`);yield*e}function pr(r){return r instanceof fr||typeof r=="object"&&r!==null&&Object.values(r).some(e=>Array.isArray(e)?e.some(pr):e instanceof fr||pr(e))}function ai(r){return JSON.stringify(r,(e,t)=>t??void 0)}function un(r){return{method:"POST",headers:{"content-type":"application/json",connection:"keep-alive"},body:ai(r)}}async function*Jo(r,e){try{yield*r}catch(t){e(t)}}function Zo(r,e){const t=Xo(),n=ea(r,t),i=Jo(n,e),s=Oo(i);return{method:"POST",headers:{"content-type":`multipart/form-data; boundary=${t}`,connection:"keep-alive"},body:s}}function Xo(){return"----------"+ui(32)}function ui(r=16){return Array.from(Array(r)).map(()=>Math.random().toString(36)[2]||0).join("")}const Mt=new TextEncoder;async function*ea(r,e){const t=mr(r);yield Mt.encode(`--${e}\r
`);const n=Mt.encode(`\r
--${e}\r
`);let i=!0;for(const[s,o]of Object.entries(r))o!=null&&(i||(yield n),yield ta(s,typeof o=="object"?ai(o):o),i=!1);for(const{id:s,origin:o,file:d}of t)i||(yield n),yield*ra(s,o,d),i=!1;yield Mt.encode(`\r
--${e}--\r
`)}function mr(r){return typeof r!="object"||r===null?[]:Object.entries(r).flatMap(([e,t])=>{if(Array.isArray(t))return t.flatMap(n=>mr(n));if(t instanceof fr){const n=ui();Object.assign(r,{[e]:`attach://${n}`});const i=e==="media"&&"type"in r&&typeof r.type=="string"?r.type:e;return{id:n,origin:i,file:t}}else return mr(t)})}function ta(r,e){return Mt.encode(`content-disposition:form-data;name="${r}"\r
\r
${e}`)}async function*ra(r,e,t){const n=t.filename||`${e}.${na(e)}`;if(n.includes("\r")||n.includes(`
`))throw new Error(`File paths cannot contain carriage-return (\\r) or newline (\\n) characters! Filename for property '${e}' was:
"""
${n}
"""`);yield Mt.encode(`content-disposition:form-data;name="${r}";filename=${n}\r
content-type:application/octet-stream\r
\r
`);const i=await t.toRaw();i instanceof Uint8Array?yield i:yield*i}function na(r){switch(r){case"certificate":return"pem";case"photo":case"thumbnail":return"jpg";case"voice":return"ogg";case"audio":return"mp3";case"animation":case"video":case"video_note":return"mp4";case"sticker":return"webp";default:return"dat"}}const ia=z("grammy:core");function sa(r,e){return(t,n,i)=>e(r,t,n,i)}class oa{constructor(e,t={},n={}){E(this,"token");E(this,"webhookReplyEnvelope");E(this,"options");E(this,"fetch");E(this,"hasUsedWebhookReply");E(this,"installedTransformers");E(this,"call");this.token=e,this.webhookReplyEnvelope=n,this.hasUsedWebhookReply=!1,this.installedTransformers=[],this.call=async(a,c,l)=>{const u=c??{};ia(`Calling ${a}`),l!==void 0&&fa(a,u,l);const h=this.options,p=pr(u);if(this.webhookReplyEnvelope.send!==void 0&&!this.hasUsedWebhookReply&&!p&&h.canUseWebhookReply(a)){this.hasUsedWebhookReply=!0;const F=un({...u,method:a});return await this.webhookReplyEnvelope.send(F.body),{ok:!0,result:!0}}const m=ha(l),g=ca(m,h.timeoutSeconds,a),y=da(m),M=h.buildUrl(h.apiRoot,this.token,a,h.environment),C=p?Zo(u,F=>y.catch(F)):un(u),w=m.signal,I={...h.baseFetchConfig,signal:w,...C},b=[this.fetch(M instanceof URL?M.href:M,I).catch(qo(a,h.sensitiveLogs)),y.promise,g.promise];try{return await(await Promise.race(b)).json()}finally{g.handle!==void 0&&clearTimeout(g.handle)}};const i=t.apiRoot??"https://api.telegram.org",s=t.environment??"prod",{fetch:o}=t,d=o??fetch;if(this.options={apiRoot:i,environment:s,buildUrl:t.buildUrl??ua,timeoutSeconds:t.timeoutSeconds??500,baseFetchConfig:{...Bo(),...t.baseFetchConfig},canUseWebhookReply:t.canUseWebhookReply??(()=>!1),sensitiveLogs:t.sensitiveLogs??!1,fetch:(...a)=>d(...a)},this.fetch=this.options.fetch,this.options.apiRoot.endsWith("/"))throw new Error(`Remove the trailing '/' from the 'apiRoot' option (use '${this.options.apiRoot.substring(0,this.options.apiRoot.length-1)}' instead of '${this.options.apiRoot}')`)}use(...e){return this.call=e.reduce(sa,this.call),this.installedTransformers.push(...e),this}async callApi(e,t,n){const i=await this.call(e,t,n);if(i.ok)return i.result;throw Qo(i,e,t)}}function aa(r,e,t){const n=new oa(r,e,t),i={get(a,c){return c==="toJSON"?"__internal":c==="getMe"||c==="getWebhookInfo"||c==="getForumTopicIconStickers"||c==="logOut"||c==="close"?n.callApi.bind(n,c,{}):n.callApi.bind(n,c)},...la},s=new Proxy({},i),o=n.installedTransformers,d={raw:s,installedTransformers:o,use:(...a)=>(n.use(...a),d)};return d}const ua=(r,e,t,n)=>`${r}/bot${e}/${n==="test"?"test/":""}${t}`,la={set(){return!1},defineProperty(){return!1},deleteProperty(){return!1},ownKeys(){return[]}};function ca(r,e,t){let n;return{promise:new Promise((s,o)=>{n=setTimeout(()=>{const d=`Request to '${t}' timed out after ${e} seconds`;o(new Error(d)),r.abort()},1e3*e)}),handle:n}}function da(r){let e=n=>{throw n};return{promise:new Promise((n,i)=>{e=s=>{i(s),r.abort()}}),catch:e}}function ha(r){const e=new AbortController;if(r===void 0)return e;const t=r;function n(){e.abort(),t.removeEventListener("abort",n)}return t.aborted?n():t.addEventListener("abort",n),{abort:n,signal:e.signal}}function fa(r,e,t){if(typeof(t==null?void 0:t.addEventListener)=="function")return;let n=JSON.stringify(e);n.length>20&&(n=n.substring(0,16)+" ...");let i=JSON.stringify(t);throw i.length>20&&(i=i.substring(0,16)+" ..."),new Error(`Incorrect abort signal instance found! You passed two payloads to '${r}' but you should merge the second one containing '${i}' into the first one containing '${n}'! If you are using context shortcuts, you may want to use a method on 'ctx.api' instead.

If you want to prevent such mistakes in the future, consider using TypeScript. https://www.typescriptlang.org/`)}class ln{constructor(e,t,n){E(this,"token");E(this,"options");E(this,"raw");E(this,"config");this.token=e,this.options=t;const{raw:i,use:s,installedTransformers:o}=aa(e,t,n);this.raw=i,this.config={use:s,installedTransformers:()=>o.slice()}}getUpdates(e,t){return this.raw.getUpdates({...e},t)}setWebhook(e,t,n){return this.raw.setWebhook({url:e,...t},n)}deleteWebhook(e,t){return this.raw.deleteWebhook({...e},t)}getWebhookInfo(e){return this.raw.getWebhookInfo(e)}getMe(e){return this.raw.getMe(e)}logOut(e){return this.raw.logOut(e)}close(e){return this.raw.close(e)}sendMessage(e,t,n,i){return this.raw.sendMessage({chat_id:e,text:t,...n},i)}forwardMessage(e,t,n,i,s){return this.raw.forwardMessage({chat_id:e,from_chat_id:t,message_id:n,...i},s)}forwardMessages(e,t,n,i,s){return this.raw.forwardMessages({chat_id:e,from_chat_id:t,message_ids:n,...i},s)}copyMessage(e,t,n,i,s){return this.raw.copyMessage({chat_id:e,from_chat_id:t,message_id:n,...i},s)}copyMessages(e,t,n,i,s){return this.raw.copyMessages({chat_id:e,from_chat_id:t,message_ids:n,...i},s)}sendPhoto(e,t,n,i){return this.raw.sendPhoto({chat_id:e,photo:t,...n},i)}sendAudio(e,t,n,i){return this.raw.sendAudio({chat_id:e,audio:t,...n},i)}sendDocument(e,t,n,i){return this.raw.sendDocument({chat_id:e,document:t,...n},i)}sendVideo(e,t,n,i){return this.raw.sendVideo({chat_id:e,video:t,...n},i)}sendAnimation(e,t,n,i){return this.raw.sendAnimation({chat_id:e,animation:t,...n},i)}sendVoice(e,t,n,i){return this.raw.sendVoice({chat_id:e,voice:t,...n},i)}sendVideoNote(e,t,n,i){return this.raw.sendVideoNote({chat_id:e,video_note:t,...n},i)}sendMediaGroup(e,t,n,i){return this.raw.sendMediaGroup({chat_id:e,media:t,...n},i)}sendLocation(e,t,n,i,s){return this.raw.sendLocation({chat_id:e,latitude:t,longitude:n,...i},s)}editMessageLiveLocation(e,t,n,i,s,o){return this.raw.editMessageLiveLocation({chat_id:e,message_id:t,latitude:n,longitude:i,...s},o)}editMessageLiveLocationInline(e,t,n,i,s){return this.raw.editMessageLiveLocation({inline_message_id:e,latitude:t,longitude:n,...i},s)}stopMessageLiveLocation(e,t,n,i){return this.raw.stopMessageLiveLocation({chat_id:e,message_id:t,...n},i)}stopMessageLiveLocationInline(e,t,n){return this.raw.stopMessageLiveLocation({inline_message_id:e,...t},n)}sendPaidMedia(e,t,n,i,s){return this.raw.sendPaidMedia({chat_id:e,star_count:t,media:n,...i},s)}sendVenue(e,t,n,i,s,o,d){return this.raw.sendVenue({chat_id:e,latitude:t,longitude:n,title:i,address:s,...o},d)}sendContact(e,t,n,i,s){return this.raw.sendContact({chat_id:e,phone_number:t,first_name:n,...i},s)}sendPoll(e,t,n,i,s){return this.raw.sendPoll({chat_id:e,question:t,options:n,...i},s)}sendDice(e,t,n,i){return this.raw.sendDice({chat_id:e,emoji:t,...n},i)}setMessageReaction(e,t,n,i,s){return this.raw.setMessageReaction({chat_id:e,message_id:t,reaction:n,...i},s)}sendChatAction(e,t,n,i){return this.raw.sendChatAction({chat_id:e,action:t,...n},i)}getUserProfilePhotos(e,t,n){return this.raw.getUserProfilePhotos({user_id:e,...t},n)}setUserEmojiStatus(e,t,n){return this.raw.setUserEmojiStatus({user_id:e,...t},n)}getUserChatBoosts(e,t,n){return this.raw.getUserChatBoosts({chat_id:e,user_id:t},n)}getBusinessConnection(e,t){return this.raw.getBusinessConnection({business_connection_id:e},t)}getFile(e,t){return this.raw.getFile({file_id:e},t)}kickChatMember(...e){return this.banChatMember(...e)}banChatMember(e,t,n,i){return this.raw.banChatMember({chat_id:e,user_id:t,...n},i)}unbanChatMember(e,t,n,i){return this.raw.unbanChatMember({chat_id:e,user_id:t,...n},i)}restrictChatMember(e,t,n,i,s){return this.raw.restrictChatMember({chat_id:e,user_id:t,permissions:n,...i},s)}promoteChatMember(e,t,n,i){return this.raw.promoteChatMember({chat_id:e,user_id:t,...n},i)}setChatAdministratorCustomTitle(e,t,n,i){return this.raw.setChatAdministratorCustomTitle({chat_id:e,user_id:t,custom_title:n},i)}banChatSenderChat(e,t,n){return this.raw.banChatSenderChat({chat_id:e,sender_chat_id:t},n)}unbanChatSenderChat(e,t,n){return this.raw.unbanChatSenderChat({chat_id:e,sender_chat_id:t},n)}setChatPermissions(e,t,n,i){return this.raw.setChatPermissions({chat_id:e,permissions:t,...n},i)}exportChatInviteLink(e,t){return this.raw.exportChatInviteLink({chat_id:e},t)}createChatInviteLink(e,t,n){return this.raw.createChatInviteLink({chat_id:e,...t},n)}editChatInviteLink(e,t,n,i){return this.raw.editChatInviteLink({chat_id:e,invite_link:t,...n},i)}createChatSubscriptionInviteLink(e,t,n,i,s){return this.raw.createChatSubscriptionInviteLink({chat_id:e,subscription_period:t,subscription_price:n,...i},s)}editChatSubscriptionInviteLink(e,t,n,i){return this.raw.editChatSubscriptionInviteLink({chat_id:e,invite_link:t,...n},i)}revokeChatInviteLink(e,t,n){return this.raw.revokeChatInviteLink({chat_id:e,invite_link:t},n)}approveChatJoinRequest(e,t,n){return this.raw.approveChatJoinRequest({chat_id:e,user_id:t},n)}declineChatJoinRequest(e,t,n){return this.raw.declineChatJoinRequest({chat_id:e,user_id:t},n)}setChatPhoto(e,t,n){return this.raw.setChatPhoto({chat_id:e,photo:t},n)}deleteChatPhoto(e,t){return this.raw.deleteChatPhoto({chat_id:e},t)}setChatTitle(e,t,n){return this.raw.setChatTitle({chat_id:e,title:t},n)}setChatDescription(e,t,n){return this.raw.setChatDescription({chat_id:e,description:t},n)}pinChatMessage(e,t,n,i){return this.raw.pinChatMessage({chat_id:e,message_id:t,...n},i)}unpinChatMessage(e,t,n){return this.raw.unpinChatMessage({chat_id:e,message_id:t},n)}unpinAllChatMessages(e,t){return this.raw.unpinAllChatMessages({chat_id:e},t)}leaveChat(e,t){return this.raw.leaveChat({chat_id:e},t)}getChat(e,t){return this.raw.getChat({chat_id:e},t)}getChatAdministrators(e,t){return this.raw.getChatAdministrators({chat_id:e},t)}getChatMembersCount(...e){return this.getChatMemberCount(...e)}getChatMemberCount(e,t){return this.raw.getChatMemberCount({chat_id:e},t)}getChatMember(e,t,n){return this.raw.getChatMember({chat_id:e,user_id:t},n)}setChatStickerSet(e,t,n){return this.raw.setChatStickerSet({chat_id:e,sticker_set_name:t},n)}deleteChatStickerSet(e,t){return this.raw.deleteChatStickerSet({chat_id:e},t)}getForumTopicIconStickers(e){return this.raw.getForumTopicIconStickers(e)}createForumTopic(e,t,n,i){return this.raw.createForumTopic({chat_id:e,name:t,...n},i)}editForumTopic(e,t,n,i){return this.raw.editForumTopic({chat_id:e,message_thread_id:t,...n},i)}closeForumTopic(e,t,n){return this.raw.closeForumTopic({chat_id:e,message_thread_id:t},n)}reopenForumTopic(e,t,n){return this.raw.reopenForumTopic({chat_id:e,message_thread_id:t},n)}deleteForumTopic(e,t,n){return this.raw.deleteForumTopic({chat_id:e,message_thread_id:t},n)}unpinAllForumTopicMessages(e,t,n){return this.raw.unpinAllForumTopicMessages({chat_id:e,message_thread_id:t},n)}editGeneralForumTopic(e,t,n){return this.raw.editGeneralForumTopic({chat_id:e,name:t},n)}closeGeneralForumTopic(e,t){return this.raw.closeGeneralForumTopic({chat_id:e},t)}reopenGeneralForumTopic(e,t){return this.raw.reopenGeneralForumTopic({chat_id:e},t)}hideGeneralForumTopic(e,t){return this.raw.hideGeneralForumTopic({chat_id:e},t)}unhideGeneralForumTopic(e,t){return this.raw.unhideGeneralForumTopic({chat_id:e},t)}unpinAllGeneralForumTopicMessages(e,t){return this.raw.unpinAllGeneralForumTopicMessages({chat_id:e},t)}answerCallbackQuery(e,t,n){return this.raw.answerCallbackQuery({callback_query_id:e,...t},n)}setMyName(e,t,n){return this.raw.setMyName({name:e,...t},n)}getMyName(e,t){return this.raw.getMyName(e??{},t)}setMyCommands(e,t,n){return this.raw.setMyCommands({commands:e,...t},n)}deleteMyCommands(e,t){return this.raw.deleteMyCommands({...e},t)}getMyCommands(e,t){return this.raw.getMyCommands({...e},t)}setMyDescription(e,t,n){return this.raw.setMyDescription({description:e,...t},n)}getMyDescription(e,t){return this.raw.getMyDescription({...e},t)}setMyShortDescription(e,t,n){return this.raw.setMyShortDescription({short_description:e,...t},n)}getMyShortDescription(e,t){return this.raw.getMyShortDescription({...e},t)}setChatMenuButton(e,t){return this.raw.setChatMenuButton({...e},t)}getChatMenuButton(e,t){return this.raw.getChatMenuButton({...e},t)}setMyDefaultAdministratorRights(e,t){return this.raw.setMyDefaultAdministratorRights({...e},t)}getMyDefaultAdministratorRights(e,t){return this.raw.getMyDefaultAdministratorRights({...e},t)}editMessageText(e,t,n,i,s){return this.raw.editMessageText({chat_id:e,message_id:t,text:n,...i},s)}editMessageTextInline(e,t,n,i){return this.raw.editMessageText({inline_message_id:e,text:t,...n},i)}editMessageCaption(e,t,n,i){return this.raw.editMessageCaption({chat_id:e,message_id:t,...n},i)}editMessageCaptionInline(e,t,n){return this.raw.editMessageCaption({inline_message_id:e,...t},n)}editMessageMedia(e,t,n,i,s){return this.raw.editMessageMedia({chat_id:e,message_id:t,media:n,...i},s)}editMessageMediaInline(e,t,n,i){return this.raw.editMessageMedia({inline_message_id:e,media:t,...n},i)}editMessageReplyMarkup(e,t,n,i){return this.raw.editMessageReplyMarkup({chat_id:e,message_id:t,...n},i)}editMessageReplyMarkupInline(e,t,n){return this.raw.editMessageReplyMarkup({inline_message_id:e,...t},n)}stopPoll(e,t,n,i){return this.raw.stopPoll({chat_id:e,message_id:t,...n},i)}deleteMessage(e,t,n){return this.raw.deleteMessage({chat_id:e,message_id:t},n)}deleteMessages(e,t,n){return this.raw.deleteMessages({chat_id:e,message_ids:t},n)}sendSticker(e,t,n,i){return this.raw.sendSticker({chat_id:e,sticker:t,...n},i)}getStickerSet(e,t){return this.raw.getStickerSet({name:e},t)}getCustomEmojiStickers(e,t){return this.raw.getCustomEmojiStickers({custom_emoji_ids:e},t)}uploadStickerFile(e,t,n,i){return this.raw.uploadStickerFile({user_id:e,sticker_format:t,sticker:n},i)}createNewStickerSet(e,t,n,i,s,o){return this.raw.createNewStickerSet({user_id:e,name:t,title:n,stickers:i,...s},o)}addStickerToSet(e,t,n,i){return this.raw.addStickerToSet({user_id:e,name:t,sticker:n},i)}setStickerPositionInSet(e,t,n){return this.raw.setStickerPositionInSet({sticker:e,position:t},n)}deleteStickerFromSet(e,t){return this.raw.deleteStickerFromSet({sticker:e},t)}replaceStickerInSet(e,t,n,i,s){return this.raw.replaceStickerInSet({user_id:e,name:t,old_sticker:n,sticker:i},s)}setStickerEmojiList(e,t,n){return this.raw.setStickerEmojiList({sticker:e,emoji_list:t},n)}setStickerKeywords(e,t,n){return this.raw.setStickerKeywords({sticker:e,keywords:t},n)}setStickerMaskPosition(e,t,n){return this.raw.setStickerMaskPosition({sticker:e,mask_position:t},n)}setStickerSetTitle(e,t,n){return this.raw.setStickerSetTitle({name:e,title:t},n)}deleteStickerSet(e,t){return this.raw.deleteStickerSet({name:e},t)}setStickerSetThumbnail(e,t,n,i,s){return this.raw.setStickerSetThumbnail({name:e,user_id:t,thumbnail:n,format:i},s)}setCustomEmojiStickerSetThumbnail(e,t,n){return this.raw.setCustomEmojiStickerSetThumbnail({name:e,custom_emoji_id:t},n)}getAvailableGifts(e){return this.raw.getAvailableGifts(e)}sendGift(e,t,n,i){return this.raw.sendGift({user_id:e,gift_id:t,...n},i)}answerInlineQuery(e,t,n,i){return this.raw.answerInlineQuery({inline_query_id:e,results:t,...n},i)}answerWebAppQuery(e,t,n){return this.raw.answerWebAppQuery({web_app_query_id:e,result:t},n)}savePreparedInlineMessage(e,t,n,i){return this.raw.savePreparedInlineMessage({user_id:e,result:t,...n},i)}sendInvoice(e,t,n,i,s,o,d,a){return this.raw.sendInvoice({chat_id:e,title:t,description:n,payload:i,currency:s,prices:o,...d},a)}createInvoiceLink(e,t,n,i,s,o,d,a){return this.raw.createInvoiceLink({title:e,description:t,payload:n,provider_token:i,currency:s,prices:o,...d},a)}answerShippingQuery(e,t,n,i){return this.raw.answerShippingQuery({shipping_query_id:e,ok:t,...n},i)}answerPreCheckoutQuery(e,t,n,i){return this.raw.answerPreCheckoutQuery({pre_checkout_query_id:e,ok:t,...n},i)}getStarTransactions(e,t){return this.raw.getStarTransactions({...e},t)}refundStarPayment(e,t,n){return this.raw.refundStarPayment({user_id:e,telegram_payment_charge_id:t},n)}editUserStarSubscription(e,t,n,i){return this.raw.editUserStarSubscription({user_id:e,telegram_payment_charge_id:t,is_canceled:n},i)}verifyUser(e,t,n){return this.raw.verifyUser({user_id:e,...t},n)}verifyChat(e,t,n){return this.raw.verifyChat({chat_id:e,...t},n)}removeUserVerification(e,t){return this.raw.removeUserVerification({user_id:e},t)}removeChatVerification(e,t){return this.raw.removeChatVerification({chat_id:e},t)}setPassportDataErrors(e,t,n){return this.raw.setPassportDataErrors({user_id:e,errors:t},n)}sendGame(e,t,n,i){return this.raw.sendGame({chat_id:e,game_short_name:t,...n},i)}setGameScore(e,t,n,i,s,o){return this.raw.setGameScore({chat_id:e,message_id:t,user_id:n,score:i,...s},o)}setGameScoreInline(e,t,n,i,s){return this.raw.setGameScore({inline_message_id:e,user_id:t,score:n,...i},s)}getGameHighScores(e,t,n,i){return this.raw.getGameHighScores({chat_id:e,message_id:t,user_id:n},i)}getGameHighScoresInline(e,t,n){return this.raw.getGameHighScores({inline_message_id:e,user_id:t},n)}}const ue=z("grammy:bot"),pa=z("grammy:warn"),rt=z("grammy:error"),li=["message","edited_message","channel_post","edited_channel_post","business_connection","business_message","edited_business_message","deleted_business_messages","inline_query","chosen_inline_result","callback_query","shipping_query","pre_checkout_query","poll","poll_answer","my_chat_member","chat_join_request","chat_boost","removed_chat_boost"];class ma extends Ue{constructor(t,n){super();E(this,"token");E(this,"pollingRunning");E(this,"pollingAbortController");E(this,"lastTriedUpdateId");E(this,"api");E(this,"me");E(this,"mePromise");E(this,"clientConfig");E(this,"ContextConstructor");E(this,"observedUpdateTypes");E(this,"errorHandler");if(this.token=t,this.pollingRunning=!1,this.lastTriedUpdateId=0,this.observedUpdateTypes=new Set,this.errorHandler=async i=>{var s,o;throw console.error("Error in middleware while handling update",(o=(s=i.ctx)==null?void 0:s.update)==null?void 0:o.update_id,i.error),console.error("No error handler was set!"),console.error("Set your own error handler with `bot.catch = ...`"),this.pollingRunning&&(console.error("Stopping bot"),await this.stop()),i},!t)throw new Error("Empty token!");this.me=n==null?void 0:n.botInfo,this.clientConfig=n==null?void 0:n.client,this.ContextConstructor=(n==null?void 0:n.ContextConstructor)??H,this.api=new ln(t,this.clientConfig)}set botInfo(t){this.me=t}get botInfo(){if(this.me===void 0)throw new Error("Bot information unavailable! Make sure to call `await bot.init()` before accessing `bot.botInfo`!");return this.me}on(t,...n){for(const[i]of zn(t).flatMap(Yn))this.observedUpdateTypes.add(i);return super.on(t,...n)}reaction(t,...n){return this.observedUpdateTypes.add("message_reaction"),super.reaction(t,...n)}isInited(){return this.me!==void 0}async init(t){if(!this.isInited()){ue("Initializing bot"),this.mePromise??(this.mePromise=cn(()=>this.api.getMe(t),t));let n;try{n=await this.mePromise}finally{this.mePromise=void 0}this.me===void 0?this.me=n:ue("Bot info was set by now, will not overwrite")}ue(`I am ${this.me.username}!`)}async handleUpdates(t){for(const n of t){this.lastTriedUpdateId=n.update_id;try{await this.handleUpdate(n)}catch(i){if(i instanceof hr)await this.errorHandler(i);else throw console.error("FATAL: grammY unable to handle:",i),i}}}async handleUpdate(t,n){if(this.me===void 0)throw new Error("Bot not initialized! Either call `await bot.init()`, or directly set the `botInfo` option in the `Bot` constructor to specify a known bot info object.");ue(`Processing update ${t.update_id}`);const i=new ln(this.token,this.clientConfig,n),s=this.api.config.installedTransformers();s.length>0&&i.config.use(...s);const o=new this.ContextConstructor(t,i,this.me);try{await Hn(this.middleware(),o)}catch(d){throw rt(`Error in middleware for update ${t.update_id}`),new hr(d,o)}}async start(t){var i,s,o;const n=[];if(this.isInited()||n.push(this.init((i=this.pollingAbortController)==null?void 0:i.signal)),this.pollingRunning){await Promise.all(n),ue("Simple long polling already running!");return}this.pollingRunning=!0,this.pollingAbortController=new AbortController;try{n.push(cn(async()=>{var d;await this.api.deleteWebhook({drop_pending_updates:t==null?void 0:t.drop_pending_updates},(d=this.pollingAbortController)==null?void 0:d.signal)},(s=this.pollingAbortController)==null?void 0:s.signal)),await Promise.all(n),await((o=t==null?void 0:t.onStart)==null?void 0:o.call(t,this.botInfo))}catch(d){throw this.pollingRunning=!1,this.pollingAbortController=void 0,d}this.pollingRunning&&(ga(this.observedUpdateTypes,t==null?void 0:t.allowed_updates),this.use=va,ue("Starting simple long polling"),await this.loop(t),ue("Middleware is done running"))}async stop(){var t;if(this.pollingRunning){ue("Stopping bot, saving update offset"),this.pollingRunning=!1,(t=this.pollingAbortController)==null||t.abort();const n=this.lastTriedUpdateId+1;await this.api.getUpdates({offset:n,limit:1}).finally(()=>this.pollingAbortController=void 0)}else ue("Bot is not running!")}isRunning(){return this.pollingRunning}catch(t){this.errorHandler=t}async loop(t){const n=t==null?void 0:t.limit,i=(t==null?void 0:t.timeout)??30;let s=(t==null?void 0:t.allowed_updates)??[];try{for(;this.pollingRunning;){const o=await this.fetchUpdates({limit:n,timeout:i,allowed_updates:s});if(o===void 0)break;await this.handleUpdates(o),s=void 0}}finally{this.pollingRunning=!1}}async fetchUpdates({limit:t,timeout:n,allowed_updates:i}){var d;const s=this.lastTriedUpdateId+1;let o;do try{o=await this.api.getUpdates({offset:s,limit:t,timeout:n,allowed_updates:i},(d=this.pollingAbortController)==null?void 0:d.signal)}catch(a){await this.handlePollingError(a)}while(o===void 0&&this.pollingRunning);return o}async handlePollingError(t){if(!this.pollingRunning){ue("Pending getUpdates request cancelled");return}let n=3;if(t instanceof Rr){if(rt(t.message),t.error_code===401||t.error_code===409)throw t;t.error_code===429&&(rt("Bot API server is closing."),n=t.parameters.retry_after??n)}else rt(t);rt(`Call to getUpdates failed, retrying in ${n} seconds ...`),await gr(n)}}async function cn(r,e){let n=50;async function i(o){let d=!1,a="rethrow";if(o instanceof ri)d=!0,a="retry";else if(o instanceof Rr){if(o.error_code>=500)d=!0,a="retry";else if(o.error_code===429){const c=o.parameters.retry_after;typeof c=="number"?(await gr(c,e),n=50):d=!0,a="retry"}}if(d){n!==50&&await gr(n,e);const c=20*60*1e3;n=Math.min(c,2*n)}return a}let s={ok:!1};for(;!s.ok;)try{s={ok:!0,value:await r()}}catch(o){switch(rt(o),await i(o)){case"retry":continue;case"rethrow":throw o}}return s.value}async function gr(r,e){let t,n;function i(){n==null||n(new Error("Aborted delay")),t!==void 0&&clearTimeout(t)}try{await new Promise((s,o)=>{if(n=o,e!=null&&e.aborted){i();return}e==null||e.addEventListener("abort",i),t=setTimeout(s,1e3*r)})}finally{e==null||e.removeEventListener("abort",i)}}function ga(r,e=li){const t=Array.from(r).filter(n=>!e.includes(n));t.length>0&&pa(`You registered listeners for the following update types, but you did not specify them in \`allowed_updates\` so they may not be received: ${t.map(n=>`'${n}'`).join(", ")}`)}function va(){throw new Error(`It looks like you are registering more listeners on your bot from within other listeners! This means that every time your bot handles a message like this one, new listeners will be added. This list grows until your machine crashes, so grammY throws this error to tell you that you should probably do things a bit differently. If you're unsure how to resolve this problem, you can ask in the group chat: https://telegram.me/grammyjs

On the other hand, if you actually know what you're doing and you do need to install further middleware while your bot is running, consider installing a composer instance on your bot, and in turn augment the composer after the fact. This way, you can circumvent this protection against memory leaks.`)}[...li];z("grammy:session");z("grammy:error");function _a(r){var s,o;const e=(r||"").trim();if(!e)return"?";const t=e.split(/\s+/).filter(Boolean),n=((s=t[0])==null?void 0:s[0])||"",i=((o=t[1])==null?void 0:o[0])||"";return(n+i).toUpperCase()||n.toUpperCase()||"?"}function ya(r){return(r||"").replace(/\s+/g," ").slice(0,60)}function wa(r){return r.from?[r.from.first_name,r.from.last_name].filter(Boolean).join(" ")||r.from.username||"Ngi dng":r.author_signature?r.author_signature:"H thng"}function ba(){let r=localStorage.getItem("token")||"",e=$state(r),t=$state(localStorage.getItem("proxyBase")||""),n=$state(new Map),i=$state(null),s=$state(null),o=$state(new Map),d=$state([]),a=$state(null),c=$state(!1),l=$state(window.innerWidth>768),u=$state(!1),h=null;const p=_=>{e=_,localStorage.setItem("token",_),n.clear(),i=null,o.clear(),y(),_&&M()},m=()=>{const _=prompt("Enter your bot token:");if(!_)throw new Error("Bot token is required");return p(_),_},g=()=>{if(!e)return;const _={proxyBase:t,chats:Array.from(n.entries()).map(([v,P])=>[v,{...P,messageIds:[...P.messageIds]}]),currentChatId:i,cachedFileUrls:Array.from(o.entries())};localStorage.setItem(`telegram_${e}`,JSON.stringify(_))},y=()=>{if(!e)return;const _=localStorage.getItem(`telegram_${e}`);if(_)try{const v=JSON.parse(_);if(t=v.proxyBase||"",v.chats){const P=new Map;for(const[D,ie]of v.chats){const X=ie;P.set(D,{...X,messageIds:new Set(X.messageIds)})}n=P}i=v.currentChatId||null,v.cachedFileUrls&&(o=new Map(v.cachedFileUrls))}catch(v){console.error("Error loading state:",v)}},M=async()=>{if(e)try{h=new ma(e),t&&h.api.config.use(async(_,v,P,D)=>{const ie=`https://api.telegram.org/bot${e}/${v}`,X=t.replace(/\/+$/,"")+"/"+ie;return(await fetch(X,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(P||{}),signal:D})).json()}),a=await h.api.getMe(),document.title=`${a==null?void 0:a.first_name} - Bottelegram`||"Bottelegram",h.command("start",_=>_.reply(`Welcome! This bot is powered by 
https://bottelegram.web.app

Channel: @contentdownload

Group: @contentdownload_group`)),h.on("message",async _=>{const v=_.message;v!=null&&v.chat&&await C(v.chat.id.toString(),v,!0)}),await h.start(),c=!0}catch(_){console.error("Error initializing bot:",_),c=!1,T("Connection Error","Failed to initialize bot. Please check your token.","error")}},C=async(_,v,P)=>{var $r;if(!n.has(_)){const L=v.chat,Xe=L.type==="private"?[v.chat.first_name,v.chat.last_name].filter(Boolean).join(" ")||v.chat.username||"Ngi dng":v.chat.title||L.type||"Chat";n.set(_,{id:_,type:L.type,title:Xe,avatarText:_a(Xe),messages:[],messageIds:new Set,lastText:"",lastDate:0,unread:0})}const D=n.get(_),ie=wa(v),X={id:v.message_id,chatId:_,side:P?"left":"right",date:(v.date||Math.floor(Date.now()/1e3))*1e3,fromName:ie,reply_to:($r=v.reply_to_message)==null?void 0:$r.message_id,reply_preview:v.reply_to_message?ya(v.reply_to_message.text||v.reply_to_message.caption||""):void 0};let Q;if(v.text)Q={...X,type:"text",text:v.text};else if(v.photo){const L=v.photo[v.photo.length-1],Ze=await w(L.file_id);Q={...X,type:"photo",mediaUrl:Ze,caption:v.caption||""}}else if(v.video){const L=await w(v.video.file_id);Q={...X,type:"video",mediaUrl:L,caption:v.caption||""}}else if(v.audio){const L=await w(v.audio.file_id);Q={...X,type:"audio",mediaUrl:L,caption:v.caption||""}}else if(v.voice){const L=await w(v.voice.file_id);Q={...X,type:"voice",mediaUrl:L,caption:v.caption||""}}else if(v.document){const L=await w(v.document.file_id);Q={...X,type:"document",mediaUrl:L,caption:v.caption||"",fileName:v.document.file_name||"Tp"}}else if(v.sticker){const L=v.sticker;let Ze="tgs",Xe="";L.is_video?(Ze="webm",Xe=await w(L.file_id)):L.is_animated||(Ze="webp",Xe=await w(L.file_id)),Q={...X,type:"sticker",mediaUrl:Xe,stickerFormat:Ze,emoji:L.emoji||""}}else Q={...X,type:"text",text:"[Khng hin th loi ni dung ny]"};if(!D.messageIds.has(Q.id)){D.messageIds.add(Q.id),D.messages.push(Q);let L="";Q.type==="text"?L=Q.text:"caption"in Q&&Q.caption?L=Q.caption:"text"in Q?L=Q.text:L=`[${Q.type}]`,D.lastText=L,D.lastDate=Q.date,P&&_!==i&&(D.unread++,T(D.title,D.lastText,"info")),g()}},w=async _=>{if(o.has(_))return o.get(_);if(!h)throw new Error("Bot not initialized");try{const v=await h.api.getFile(_),D=`https://api.telegram.org/file/bot${e}/${v.file_path}`;if(t){const ie=t.replace(/\/+$/,"")+"/"+D;o.set(_,ie)}else o.set(_,D);return g(),o.get(_)}catch(v){throw console.error("Error getting file URL:",v),v}},I=_=>{i=_;const v=n.get(_);v&&(v.unread=0,g())},S=_=>{const v=n.get(_);v&&(v.unread=0,g())};let b=null;const F=()=>{try{b||(b=new(window.AudioContext||window.webkitAudioContext));const _=b.createOscillator(),v=b.createGain();_.connect(v),v.connect(b.destination),_.frequency.value=800,_.type="sine",v.gain.setValueAtTime(.3,b.currentTime),v.gain.exponentialRampToValueAtTime(.01,b.currentTime+.1),_.start(b.currentTime),_.stop(b.currentTime+.1)}catch(_){console.warn("Could not play notification sound:",_)}},T=(_,v,P="info",D)=>{const ie={id:Date.now().toString()+Math.random().toString(36).substr(2,9),title:_,body:v,type:P,timestamp:Date.now(),duration:D||(P==="error"?8e3:5e3)};d.push(ie),(P==="success"||P==="info")&&F()},U=_=>{const v=d.findIndex(P=>P.id===_);v!==-1&&d.splice(v,1)},oe=()=>{d.length=0},Ce=async(_,v,P)=>{if(!h)throw new Error("Bot not initialized");try{const D={chat_id:_,text:v};P&&(D.reply_to_message_id=P);const ie=await h.api.sendMessage(_,v,{reply_to_message_id:P});await C(_,ie,!1),T("Message Sent","Your message was delivered successfully","success",2e3)}catch(D){throw console.error("Error sending message:",D),T("Send Failed","Failed to send message. Please try again.","error"),D}},ae=async(_,v)=>{if(!h)throw new Error("Bot not initialized");await h.api.sendChatAction(_,v)},$e=async(_,v)=>{if(!h)throw new Error("Bot not initialized");try{await h.api.deleteMessage(_,v);const P=n.get(_);P&&(P.messages=P.messages.filter(D=>D.id!==v),P.messageIds.delete(v),g()),T("Message Deleted","Message was deleted successfully","success",2e3)}catch(P){throw console.error("Error deleting message:",P),T("Delete Failed","Failed to delete message. Please try again.","error"),P}},_t=async _=>{if(!h)throw new Error("Bot not initialized");return h.api.getChat(_)},Le=async _=>{if(!h)throw new Error("Bot not initialized");return h.api.getChatAdministrators(_)},He=()=>{s=null},Je=(_,v)=>{s=_};return y(),{token:e,proxyBase:t,chats:n,currentChatId:i,replyTo:s,cachedFileUrls:o,toastQueue:d,botInfo:a,isConnected:c,showSidebar:l,showSettings:u,...{initializeBot:M,selectChat:I,markRead:S,saveState:g,loadState:y,enqueueToast:T,dismissToast:U,clearToasts:oe,sendText:Ce,sendChatAction:ae,deleteMessage:$e,getChat:_t,getChatAdministrators:Le,getFileUrl:w,clearReplyContext:He,setReplyContext:Je,setToken:p,getTokenPrompt:m}}}const N=ba(),Ca=(r,e)=>{Notification.permission==="granted"?new Notification(r,{body:e}):Notification.permission!=="denied"&&Notification.requestPermission().then(t=>{t==="granted"&&new Notification(r,{body:e})})};Pi();/**
 * @license lucide-svelte v0.473.0 - ISC
 *
 * ISC License
 * 
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 * 
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 * 
 */const Ma={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"};var ka=vs("<svg><!><!></svg>");function Ke(r,e){const t=_e(e,["children","$$slots","$$events","$$legacy"]),n=_e(t,["name","color","size","strokeWidth","absoluteStrokeWidth","iconNode"]);we(e,!1);let i=Ie(e,"name",8,void 0),s=Ie(e,"color",8,"currentColor"),o=Ie(e,"size",8,24),d=Ie(e,"strokeWidth",8,2),a=Ie(e,"absoluteStrokeWidth",8,!1),c=Ie(e,"iconNode",24,()=>[]);const l=(...g)=>g.filter((y,M,C)=>!!y&&C.indexOf(y)===M).join(" ");Ls();var u=ka();let h;var p=A(u);Ht(p,1,c,Pr,(g,y)=>{let M=()=>k(y)[0],C=()=>k(y)[1];var w=Pe(),I=Fe(w);Ts(I,M,!0,(S,b)=>{let F;ne(()=>F=Gr(S,F,{...C()},void 0,S.namespaceURI===_n,S.nodeName.includes("-")))}),O(g,w)});var m=x(p);Re(m,e,"default",{}),ne(()=>h=Gr(u,h,{...Ma,...n,width:o(),height:o(),stroke:s(),"stroke-width":a()?Number(d())*24/Number(o()):d(),class:l("lucide-icon","lucide",i()?`lucide-${i()}`:"",t.class)},void 0,!0)),O(r,u),be()}function Sa(r,e){const t=_e(e,["children","$$slots","$$events","$$legacy"]);Ke(r,ze({name:"circle-alert"},()=>t,{iconNode:[["circle",{cx:"12",cy:"12",r:"10"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16"}]],children:(i,s)=>{var o=Pe(),d=Fe(o);Re(d,e,"default",{}),O(i,o)},$$slots:{default:!0}}))}function Ia(r,e){const t=_e(e,["children","$$slots","$$events","$$legacy"]);Ke(r,ze({name:"circle-check-big"},()=>t,{iconNode:[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335"}],["path",{d:"m9 11 3 3L22 4"}]],children:(i,s)=>{var o=Pe(),d=Fe(o);Re(d,e,"default",{}),O(i,o)},$$slots:{default:!0}}))}function Ta(r,e){const t=_e(e,["children","$$slots","$$events","$$legacy"]);Ke(r,ze({name:"info"},()=>t,{iconNode:[["circle",{cx:"12",cy:"12",r:"10"}],["path",{d:"M12 16v-4"}],["path",{d:"M12 8h.01"}]],children:(i,s)=>{var o=Pe(),d=Fe(o);Re(d,e,"default",{}),O(i,o)},$$slots:{default:!0}}))}function Ea(r,e){const t=_e(e,["children","$$slots","$$events","$$legacy"]);Ke(r,ze({name:"menu"},()=>t,{iconNode:[["line",{x1:"4",x2:"20",y1:"12",y2:"12"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18"}]],children:(i,s)=>{var o=Pe(),d=Fe(o);Re(d,e,"default",{}),O(i,o)},$$slots:{default:!0}}))}function Aa(r,e){const t=_e(e,["children","$$slots","$$events","$$legacy"]);Ke(r,ze({name:"settings-2"},()=>t,{iconNode:[["path",{d:"M20 7h-9"}],["path",{d:"M14 17H5"}],["circle",{cx:"17",cy:"17",r:"3"}],["circle",{cx:"7",cy:"7",r:"3"}]],children:(i,s)=>{var o=Pe(),d=Fe(o);Re(d,e,"default",{}),O(i,o)},$$slots:{default:!0}}))}function xa(r,e){const t=_e(e,["children","$$slots","$$events","$$legacy"]);Ke(r,ze({name:"triangle-alert"},()=>t,{iconNode:[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3"}],["path",{d:"M12 9v4"}],["path",{d:"M12 17h.01"}]],children:(i,s)=>{var o=Pe(),d=Fe(o);Re(d,e,"default",{}),O(i,o)},$$slots:{default:!0}}))}function Fa(r,e){const t=_e(e,["children","$$slots","$$events","$$legacy"]);Ke(r,ze({name:"x"},()=>t,{iconNode:[["path",{d:"M18 6 6 18"}],["path",{d:"m6 6 12 12"}]],children:(i,s)=>{var o=Pe(),d=Fe(o);Re(d,e,"default",{}),O(i,o)},$$slots:{default:!0}}))}var Pa=V('<div class="flex justify-between items-center p-4 bg-white border-b"><div class="flex items-center gap-2"><button class="md:hidden p-2 hover:bg-gray-100 rounded-lg" aria-label="Toggle sidebar"><!></button> <h1 class="text-lg font-medium"> </h1></div> <div class="flex items-center gap-4"><a href="https://t.me/contentdownload_group" target="_blank" rel="noopener noreferrer" class="text-blue-500 hover:text-blue-600" title="Join Telegram Group"><img src="https://web.telegram.org/favicon.ico" class="h-6 w-6" alt="Telegram"></a> <button class="p-2 hover:bg-gray-100 rounded-lg" title="Settings"><!></button></div></div>');function Ra(r,e){we(e,!0);var t=Pa(),n=A(t),i=A(n);i.__click=function(...u){var h;(h=e.toggleSidebar)==null||h.apply(this,u)};var s=A(i);Ea(s,{class:"h-6 w-6"});var o=x(i,2),d=A(o),a=x(n,2),c=x(A(a),2);c.__click=function(...u){var h;(h=e.toggleSettings)==null||h.apply(this,u)};var l=A(c);Aa(l,{class:"h-6 w-6"}),ne(()=>{var u;return te(d,(u=e.botInfo)==null?void 0:u.first_name)}),O(r,t),be()}Ve(["click"]);const $a=(r,e)=>{localStorage.setItem("token",k(e)),window.location.reload()};var La=V('<div class="bg-gray-50 p-4 rounded-lg mb-4"><h2 class="text-lg font-semibold mb-2">Bot Information</h2> <p><strong>ID:</strong> </p> <p><strong>Name:</strong> </p> <p><strong>Username:</strong> </p> <p><strong>Can Join Groups:</strong> </p> <p><strong>Can Read Group Messages:</strong> </p></div>'),Na=V('<div class="p-4 bg-white border-b"><div class="mb-4"><!></div> <div class="flex gap-2"><input class="flex-1 border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:border-green-500" type="text" placeholder="Enter new bot token..."> <button class="bg-blue-500 text-white px-6 py-2 rounded-lg hover:bg-blue-600 transition-colors">Update Token</button> <button class="bg-red-500 text-white px-6 py-2 rounded-lg hover:bg-red-600 transition-colors">Clear Data</button></div></div>');function ja(r,e){we(e,!0);let t=kr(G(e.token));var n=Na(),i=A(n),s=A(i);{var o=u=>{var h=La(),p=x(A(h),2),m=x(A(p)),g=x(p,2),y=x(A(g)),M=x(g,2),C=x(A(M)),w=x(M,2),I=x(A(w)),S=x(w,2),b=x(A(S));ne(()=>{te(m,` ${e.botInfo.id??""}`),te(y,` ${e.botInfo.first_name??""}`),te(C,` @${e.botInfo.username??""}`),te(I,` ${(e.botInfo.can_join_groups?"Yes":"No")??""}`),te(b,` ${(e.botInfo.can_read_all_group_messages?"Yes":"No")??""}`)}),O(u,h)};ut(s,u=>{e.botInfo&&u(o)})}var d=x(i,2),a=A(d),c=x(a,2);c.__click=[$a,t];var l=x(c,2);l.__click=function(...u){var h;(h=e.clearData)==null||h.apply(this,u)},Vn(a,()=>k(t),u=>q(t,u)),O(r,n),be()}Ve(["click"]);var Ua=(r,e,t)=>{e.selectChat(k(t).id),window.innerWidth<768&&e.toggleSidebar()},Da=V('<span class="bg-green-500 text-white text-xs px-2 py-1 rounded-full"> </span>'),Oa=V('<div><div class="flex justify-between items-center"><span class="font-medium truncate"> </span> <!></div></div>'),Ba=V("<div></div>");function Qa(r,e){we(e,!0);var t=Ba();Ht(t,21,()=>e.chats,Pr,(n,i)=>{var s=Oa();s.__click=[Ua,e,i];var o=A(s),d=A(o),a=A(d),c=x(d,2);{var l=u=>{var h=Da(),p=A(h);ne(()=>te(p,k(i).unread)),O(u,h)};ut(c,u=>{k(i).unread&&u(l)})}ne(()=>{Oe(s,`p-3 cursor-pointer hover:bg-gray-100 ${(e.currentChat===k(i).id?"bg-gray-200":"")??""} ${(k(i).hasNotification?"bg-yellow-50":"")??""}`),te(a,k(i).name)}),O(n,s)}),ne(()=>Oe(t,`${(e.showSidebar?"block":"hidden")??""} md:block w-64 bg-gray-50 border-r overflow-y-auto absolute md:relative z-10`)),O(r,t),be()}Ve(["click"]);var Ga=V('<div class="mb-1 p-2 bg-gray-50 border-l-2 border-gray-300 rounded text-sm text-gray-600"><div class="font-medium">Replying to:</div> <div class="truncate"> </div></div>'),qa=V('<div style="max-width: 70%"><div><span> </span> <span class="text-gray-500 text-sm ml-2"> </span></div> <!> <div><!></div></div>'),Wa=V('<button class="fixed bottom-24 right-8 bg-gray-800 text-white p-2 rounded-full shadow-lg hover:bg-gray-700" aria-label="Scroll to bottom"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 14l-7 7m0 0l-7-7m7 7V3"></path></svg></button>'),Va=V('<div class="flex-1 overflow-y-auto p-4 bg-gray-100 relative"><!> <!></div>');function za(r,e){we(e,!0);let t;Qe(()=>{t&&e.setContainer(t)});function n(a){switch(a.type){case"text":return a.text;case"photo":return`<img src="${a.mediaUrl}" alt="Photo" class="max-w-full rounded-lg shadow-sm" />${a.caption?`<p class="mt-2 text-sm">${a.caption}</p>`:""}`;case"video":return`<video src="${a.mediaUrl}" controls class="max-w-full rounded-lg shadow-sm" />${a.caption?`<p class="mt-2 text-sm">${a.caption}</p>`:""}`;case"audio":return`<audio src="${a.mediaUrl}" controls class="w-full" />${a.caption?`<p class="mt-2 text-sm">${a.caption}</p>`:""}`;case"voice":return`<audio src="${a.mediaUrl}" controls class="w-full" />${a.caption?`<p class="mt-2 text-sm">${a.caption}</p>`:""}`;case"document":return`<a href="${a.mediaUrl}" target="_blank" rel="noopener noreferrer" class="flex items-center gap-2 p-2 bg-gray-50 rounded hover:bg-gray-100"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" /></svg>${a.fileName||"Document"}</a>${a.caption?`<p class="mt-2 text-sm">${a.caption}</p>`:""}`;case"sticker":return a.stickerFormat==="webp"?`<img src="${a.mediaUrl}" alt="${a.emoji||"Sticker"}" class="max-w-32 h-auto" />`:a.stickerFormat==="webm"?`<video src="${a.mediaUrl}" autoplay loop muted playsinline class="max-w-32 h-auto" />`:`<span class="text-2xl">${a.emoji||""}</span>`;default:return"[Unsupported message type]"}}var i=Va(),s=A(i);Ht(s,17,()=>e.messages,Pr,(a,c)=>{var l=qa(),u=A(l),h=A(u),p=A(h),m=x(h,2),g=A(m);ne(()=>te(g,new Date(k(c).date).toLocaleString()));var y=x(u,2);{var M=I=>{var S=Ga(),b=x(A(S),2),F=A(b);ne(()=>te(F,k(c).reply_preview)),O(I,S)};ut(y,I=>{k(c).reply_preview&&I(M)})}var C=x(y,2),w=A(C);Ss(w,()=>n(k(c))),ne(()=>{Oe(l,`mb-4 ${(k(c).side==="right"?"ml-auto":"")??""}`),Oe(u,`flex items-center mb-1 ${(k(c).side==="right"?"justify-end":"")??""}`),Oe(h,`font-bold ${(k(c).side==="right"?"text-blue-600":"text-green-600")??""}`),te(p,k(c).fromName),Oe(C,`p-3 rounded-lg shadow-sm break-words overflow-wrap-anywhere ${(k(c).side==="right"?"bg-blue-100":"bg-white")??""}`)}),O(a,l)});var o=x(s,2);{var d=a=>{var c=Wa();c.__click=function(...l){var u;(u=e.scrollToBottom)==null||u.apply(this,l)},O(a,c)};ut(o,a=>{e.showScrollButton&&a(d)})}$s(i,a=>t=a,()=>t),Gt("scroll",i,function(...a){var c;(c=e.handleScroll)==null||c.apply(this,a)}),O(r,i),be()}Ve(["click"]);var Ya=(r,e,t)=>{e.sendMessage(k(t)),q(t,"")},Ka=V('<div class="p-4 bg-white border-t"><div class="flex gap-2"><input class="flex-1 border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:border-green-500" type="text" placeholder="Type a message..."> <button class="bg-green-500 text-white px-6 py-2 rounded-lg hover:bg-green-600 transition-colors flex items-center gap-2"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path d="M10.894 2.553a1 1 0 00-1.788 0l-7 14a1 1 0 001.169 1.409l5-1.429A1 1 0 009 15.571V11a1 1 0 112 0v4.571a1 1 0 00.725.962l5 1.428a1 1 0 001.17-1.408l-7-14z"></path></svg> Send</button></div></div>');function Ha(r,e){we(e,!0);let t=kr("");const n=a=>{a.key==="Enter"&&!a.shiftKey&&(a.preventDefault(),e.sendMessage(k(t)),q(t,""))};var i=Ka(),s=A(i),o=A(s),d=x(o,2);d.__click=[Ya,e,t],Gt("keypress",o,n),Vn(o,()=>k(t),a=>q(t,a)),O(r,i),be()}Ve(["click"]);var Ja=V('<p class="text-sm opacity-90 mt-1 leading-tight break-words"> </p>'),Za=(r,e,t)=>e(k(t).id),Xa=V('<div role="alert" aria-live="polite"><!> <div class="flex-1 min-w-0 svelte-239z62"><h4 class="font-semibold text-sm leading-tight break-words"> </h4> <!></div> <button type="button" class="flex-shrink-0 p-1 rounded-md opacity-70 hover:opacity-100 transition-opacity focus:outline-none focus:ring-2 focus:ring-white focus:ring-offset-2 focus:ring-offset-current" aria-label="Dismiss notification"><!></button></div>'),eu=V('<div class="fixed bottom-4 right-4 z-50 flex flex-col gap-2 pointer-events-none svelte-239z62"></div>');function tu(r,e){we(e,!0);let t=Ie(e,"toasts",19,()=>[]);const n=new Map,i={info:Ta,success:Ia,warning:xa,error:Sa},s={info:"bg-blue-500 border-blue-600 text-white",success:"bg-green-500 border-green-600 text-white",warning:"bg-yellow-500 border-yellow-600 text-white",error:"bg-red-500 border-red-600 text-white"};Qe(()=>{t().forEach(l=>{if(!n.has(l.id)){const u=setTimeout(()=>{o(l.id)},l.duration||5e3);n.set(l.id,u)}});for(const[l,u]of n.entries())t().find(h=>h.id===l)||(clearTimeout(u),n.delete(l))});const o=l=>{const u=t().findIndex(p=>p.id===l);u!==-1&&t().splice(u,1);const h=n.get(l);h&&(clearTimeout(h),n.delete(l))},d=l=>{const u=n.get(l);u&&(clearTimeout(u),n.delete(l))},a=l=>{const u=setTimeout(()=>{o(l.id)},l.duration||5e3);n.set(l.id,u)};Os(()=>{n.forEach(l=>clearTimeout(l))});var c=eu();Ht(c,21,t,l=>l.id,(l,u)=>{var h=Xa();const p=ce(()=>i[k(u).type]),m=ce(()=>s[k(u).type]);var g=A(h);Is(g,()=>k(p),(F,T)=>{T(F,{class:"w-5 h-5 flex-shrink-0 mt-0.5"})});var y=x(g,2),M=A(y),C=A(M),w=x(M,2);{var I=F=>{var T=Ja(),U=A(T);ne(()=>te(U,k(u).body)),O(F,T)};ut(w,F=>{k(u).body&&F(I)})}var S=x(y,2);S.__click=[Za,o,u];var b=A(S);Fa(b,{class:"w-4 h-4"}),ne(()=>{Oe(h,`pointer-events-auto flex items-start gap-3 p-4 rounded-lg border shadow-lg max-w-sm min-w-[300px] transform transition-all duration-300 ease-in-out ${k(m)??""} svelte-239z62`),Rs(h,"animate-pulse",k(u).type==="warning"),te(C,k(u).title)}),Gt("mouseenter",h,()=>d(k(u).id)),Gt("mouseleave",h,()=>a(k(u))),O(l,h)}),O(r,c),be()}Ve(["click"]);var ru=V('<div class="flex flex-col h-screen max-h-screen max-w-screen overflow-hidden"><!> <!> <div class="flex flex-1 overflow-hidden"><!> <div class="flex-1 flex flex-col min-h-0 max-w-full md:max-w-[calc(100vw-16rem)]"><!> <!></div></div> <!></div>');function nu(r,e){we(e,!0);const t=N.initializeBot,n=N.selectChat,i=N.sendText,s=N.clearReplyContext,o=N.getTokenPrompt;let d=G(N.token);G(N.proxyBase);let a=G(N.chats),c=G(N.currentChatId),l=G(N.replyTo),u=N.toastQueue,h=G(N.botInfo);G(N.isConnected),G(N.showSidebar),G(N.showSettings);let p=kr(null);Qe(()=>{if(d)t();else try{o()}catch(B){console.error("Failed to get token:",B)}}),Qe(()=>{u.slice(-3).forEach(_=>{(_.type==="error"||_.type==="warning"||_.type==="success")&&Ca(_.title,_.body)})});const m=ce(()=>c?a.get(c):void 0),g=ce(()=>{var B;return((B=k(m))==null?void 0:B.messages)||[]}),y=ce(()=>Array.from(a.values()).map(B=>({id:B.id,name:B.title,unread:B.unread,hasNotification:B.unread>0}))),M=B=>{!B.trim()||!c||(i(c,B,l||void 0),s(),I())},C=()=>{d&&(localStorage.removeItem(`telegram_${d}`),N.chats.clear(),N.currentChatId=null)},w=()=>{k(p)&&k(p)},I=()=>{k(p)&&(k(p).scrollTop=k(p).scrollHeight)},S=()=>{N.showSidebar=!N.showSidebar},b=()=>{N.showSettings=!N.showSettings};var F=ru(),T=A(F);Ra(T,{get botInfo(){return h},toggleSettings:b,toggleSidebar:S});var U=x(T,2);{var oe=B=>{ja(B,{get botInfo(){return h},get token(){return d},clearData:C})};ut(U,B=>{N.showSettings&&B(oe)})}var Ce=x(U,2),ae=A(Ce),$e=ce(()=>c||"");Qa(ae,{get chats(){return k(y)},get currentChat(){return k($e)},selectChat:n,get showSidebar(){return N.showSidebar},toggleSidebar:()=>N.showSidebar=!N.showSidebar});var _t=x(ae,2),Le=A(_t);za(Le,{get messages(){return k(g)},setContainer:B=>{q(p,G(B))},showScrollButton:!1,scrollToBottom:I,handleScroll:w});var He=x(Le,2);Ha(He,{sendMessage:M});var Je=x(Ce,2);tu(Je,{toasts:u}),O(r,F),be()}_s(nu,{target:document.getElementById("app")});
