:root{color-scheme:light dark;--font-family: system-ui, -apple-system, "Segoe UI", Roboto, sans-serif;--transition-fast: .2s ease}body[data-theme=dark]{--bg: #0f1520;--panel: #121826;--panel-alt: #0b1020;--panel-elevated: #18223a;--accent: #2a69ff;--text: #e8eefc;--muted: #a9b3c9;--bubble-left: #1b2233;--bubble-right: #2f80ff;--bubble-right-text: #ffffff;--border: #1f2638;--danger: #d86161;--success: #2aa84a;--warning: #ffb347;--shadow: rgba(0, 0, 0, .28);--input-bg: #0b1020;--hover: #161d2e;--hover-strong: #1f2638;--chat-bg: #0e1423;--badge-bg: #2a69ff}body[data-theme=light]{--bg: #f3f5fb;--panel: #ffffff;--panel-alt: #f0f4ff;--panel-elevated: #eef2ff;--accent: #2a69ff;--text: #1b2436;--muted: #5f6c89;--bubble-left: #e5ecff;--bubble-right: #2f80ff;--bubble-right-text: #ffffff;--border: #cfd7ef;--danger: #d64545;--success: #2aa84a;--warning: #f29d38;--shadow: rgba(15, 25, 43, .12);--input-bg: #f8faff;--hover: #eef2ff;--hover-strong: #e1e7fb;--chat-bg: #f6f8ff;--badge-bg: #2a69ff}*{box-sizing:border-box;margin:0;padding:0}a{color:inherit}body{background:var(--bg);color:var(--text);font-family:var(--font-family);display:flex;flex-direction:column;height:100vh;transition:background var(--transition-fast),color var(--transition-fast)}button,input,textarea{font-family:inherit}textarea{resize:vertical}.app{display:flex;flex:1;overflow:hidden;position:relative}.sidebar{width:100%;max-width:300px;border-right:1px solid var(--border);background:var(--panel);display:flex;flex-direction:column;transition:transform .3s ease}.sidebar.hidden-mobile{transform:translate(-100%)}.sidebar-header{display:flex;align-items:center;justify-content:space-between;padding:16px;border-bottom:1px solid var(--border)}.sidebar-actions{display:flex;align-items:center;gap:8px}.app-title{font-weight:700;font-size:1.1rem}.open-chat{padding:12px;border-bottom:1px solid var(--border)}.open-chat-wrapper{display:grid;grid-template-columns:1fr auto;gap:8px}.open-chat-wrapper input{width:100%;padding:10px 12px;border-radius:10px;border:1px solid var(--border);background:var(--input-bg);color:var(--text)}.chat-list{overflow-y:auto;flex:1}.chat-empty{color:var(--muted);font-size:.9rem;text-align:center;padding:18px 16px}.chat-item{display:grid;grid-template-columns:42px 1fr auto auto;gap:10px;padding:12px 14px;cursor:pointer;border-bottom:1px solid var(--border);align-items:center;transition:background var(--transition-fast)}.chat-item:hover{background:var(--hover)}.chat-item.active{background:var(--hover-strong)}.avatar{width:42px;height:42px;border-radius:50%;background:var(--panel-elevated);display:grid;place-items:center;font-weight:700;color:var(--text);font-size:.95rem}.chat-item .info .name{font-weight:600;font-size:.95rem;line-height:1.3;word-break:break-word;white-space:normal;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden}.chat-item .info .last{color:var(--muted);font-size:.8rem;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.badge{background:var(--badge-bg);color:var(--bubble-right-text);min-width:22px;height:22px;padding:0 8px;border-radius:11px;display:grid;place-items:center;font-size:.75rem}.badge.hidden{display:none}.chat{flex:1;display:grid;grid-template-rows:auto 1fr auto}.chat-header{display:flex;align-items:center;justify-content:space-between;padding:12px 16px;border-bottom:1px solid var(--border);background:var(--panel);box-shadow:0 1px #0000000d}.header-left{display:flex;align-items:center;gap:12px}.header-title{font-weight:600;font-size:1.05rem;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;max-width:300px}.status{font-size:.8rem;color:var(--muted)}.header-actions{display:flex;align-items:center;gap:8px}.icon-btn{background:transparent;border:1px solid transparent;color:var(--text);cursor:pointer;padding:6px 8px;border-radius:8px;font-size:1.1rem;display:grid;place-items:center;transition:background var(--transition-fast),border-color var(--transition-fast),color var(--transition-fast)}.icon-btn:hover{background:var(--hover)}.icon-btn.primary{background:var(--accent);color:#fff;border-color:var(--accent)}.icon-btn.primary:hover{opacity:.9}.menu-toggle{display:none}.sidebar-close{display:none!important}.messages{padding:14px 18px;overflow-y:auto;background:var(--chat-bg);display:flex;flex-direction:column;gap:10px}.message{position:relative;word-wrap:break-word;white-space:pre-wrap;font-size:.92rem;border-radius:14px;padding:10px 12px;max-width:75%;cursor:pointer;box-shadow:0 1px 2px var(--shadow)}.message.left{background:var(--bubble-left);align-self:flex-start}.message.right{background:var(--bubble-right);color:var(--bubble-right-text);align-self:flex-end}.message.reply{border-left:4px solid var(--accent);padding-left:16px}.message:hover{opacity:.96}.msg-actions{position:absolute;top:4px;right:4px;display:none;gap:4px}.message:hover .msg-actions{display:flex}.msg-action-btn{background:#00000040;border:none;color:#fff;cursor:pointer;padding:4px 6px;border-radius:4px;font-size:.75rem;transition:background var(--transition-fast)}.message.right .msg-action-btn{background:#ffffff4d;color:var(--bubble-right-text)}.msg-action-btn:hover{background:#00000073}.message.right .msg-action-btn:hover{background:#ffffff73}.reply-to{font-size:.75rem;color:var(--muted);margin-bottom:6px;border-left:3px solid var(--muted);padding-left:8px;cursor:pointer}.meta{font-size:.75rem;color:var(--muted);margin-top:6px}.media{max-width:100%;border-radius:8px;margin:8px 0}.sticker-image,.sticker-video{max-width:150px!important;max-height:150px!important}.sticker-placeholder{font-size:3rem;text-align:center;padding:10px}.sticker-note{font-size:.75rem;color:var(--muted);text-align:center}.doc-link{color:var(--accent);text-decoration:none;padding:4px 8px;background:#2a69ff1f;border-radius:6px;display:inline-block}.doc-link:hover{text-decoration:underline}.composer{display:grid;grid-template-columns:auto auto 1fr auto;gap:10px;padding:12px;border-top:1px solid var(--border);background:var(--panel);align-items:end;position:relative}.composer .reply-context{grid-column:1 / -1;display:flex;align-items:center;background:var(--bubble-left);padding:6px 10px;border-radius:10px;font-size:.82rem;color:var(--muted)}.composer .reply-context.hidden{display:none}.composer .reply-context .cancel-reply{margin-left:auto;cursor:pointer;font-weight:700}.composer input[type=text],.composer textarea{padding:10px 12px;border-radius:10px;border:1px solid var(--border);background:var(--input-bg);color:var(--text);font-size:.92rem;resize:vertical;min-height:40px;max-height:120px;line-height:1.4}.btn{padding:9px 14px;border:none;border-radius:10px;background:var(--accent);color:#fff;cursor:pointer;font-size:.9rem;transition:opacity var(--transition-fast),transform var(--transition-fast)}.btn:hover:not(:disabled){opacity:.9}.btn:active:not(:disabled){transform:translateY(1px)}.btn:disabled{opacity:.5;cursor:not-allowed}.btn.secondary{background:var(--hover-strong);color:var(--text)}.btn.success{background:var(--success)}.btn.danger{background:var(--danger)}.btn.full{width:100%;text-align:center}.floating-btn{position:fixed;bottom:80px;right:20px;padding:10px 14px;background:var(--accent);color:#fff;border-radius:22px;cursor:pointer;font-size:.85rem;display:none;z-index:100;border:none}.overlay{position:fixed;top:0;right:0;bottom:0;left:0;background:#00000080;display:grid;place-items:center;z-index:100;padding:20px}.overlay.hidden{display:none}.hidden{display:none!important}.user-actions-menu.hidden{display:none}.dialog{width:90%;max-width:520px;background:var(--panel);border:1px solid var(--border);border-radius:16px;padding:20px;max-height:90vh;overflow-y:auto;box-shadow:0 18px 40px var(--shadow)}.dialog-large{max-width:640px}.dialog-medium{max-width:420px}.dialog-header{display:flex;align-items:center;justify-content:space-between;margin-bottom:16px}.dialog-header h3{font-size:1.2rem}.dialog-group+.dialog-group{margin-top:20px}.dialog-group h4{margin-bottom:10px}.dialog-group .row{display:flex;gap:10px;margin-bottom:12px;flex-wrap:wrap}.dialog-group .row.wrap{justify-content:flex-start}.dialog-group input,.dialog-group textarea{width:100%;padding:10px 12px;border-radius:10px;border:1px solid var(--border);background:var(--input-bg);color:var(--text)}.hint{font-size:.78rem;color:var(--muted);min-height:16px}.theme-selector{display:flex;gap:10px;flex-wrap:wrap}.theme-option{flex:1;min-width:100px;padding:10px;border-radius:12px;border:1px solid var(--border);background:var(--panel-alt);display:flex;flex-direction:column;align-items:center;gap:4px;cursor:pointer;color:inherit;transition:border-color var(--transition-fast),background var(--transition-fast)}.theme-option .icon{font-size:1.3rem}.theme-option.active,.theme-option:hover{border-color:var(--accent);background:#2a69ff1f}.bot-details{display:grid;gap:6px;font-size:.9rem}.label{color:var(--muted);font-weight:500;margin-right:6px}.bot-section{margin-top:14px}.section-title{font-weight:600;font-size:.9rem;margin-bottom:8px}.tag-list{display:flex;flex-wrap:wrap;gap:6px;list-style:none}.tag-list li{padding:4px 10px;border-radius:999px;background:var(--panel-alt);border:1px solid var(--border);font-size:.8rem}.option-item{display:flex;align-items:center;gap:8px;font-size:.9rem;margin-bottom:10px}.option-item.column{flex-direction:column;align-items:stretch}.dialog-tabs{display:flex;gap:8px;margin-bottom:16px}.dialog-tab{flex:1;padding:8px 10px;border-radius:10px;border:1px solid var(--border);background:var(--panel-alt);color:inherit;cursor:pointer;font-weight:600;text-align:center;transition:background var(--transition-fast),border-color var(--transition-fast)}.dialog-tab.active,.dialog-tab:hover{border-color:var(--accent);background:#2a69ff1f}.tab-panel{display:none;gap:10px;flex-direction:column}.tab-panel.active{display:flex}.group-summary{font-size:.9rem;margin-bottom:12px}.members-list{max-height:340px;overflow-y:auto;border:1px solid var(--border);border-radius:12px;background:var(--panel-alt)}.member-item{display:grid;grid-template-columns:auto 1fr auto;gap:10px;align-items:center;padding:10px 12px;border-bottom:1px solid var(--border);cursor:pointer;transition:background var(--transition-fast)}.member-item:last-child{border-bottom:none}.member-item:hover{background:var(--hover)}.member-avatar{width:40px;height:40px;border-radius:50%;background:var(--panel-elevated);display:grid;place-items:center;font-weight:600;color:var(--text)}.member-info{display:flex;flex-direction:column;gap:2px}.member-name{font-weight:600;font-size:.95rem}.member-status{font-size:.8rem;color:var(--muted)}.member-actions{display:flex;gap:6px}.members-dialog .actions{display:flex;justify-content:space-between;align-items:center;margin-top:16px;gap:12px;flex-wrap:wrap}.actions .action-buttons{display:flex;gap:8px}.member-modal-body{display:flex;gap:16px;align-items:center;margin-bottom:16px}.member-modal-info{display:grid;gap:4px}.member-modal-actions{display:flex;flex-wrap:wrap;gap:8px}.member-username,.member-id,.member-joined{color:var(--muted);font-size:.85rem}.restrict-modal-body{margin-bottom:16px}.restrict-hint{font-size:.9rem;color:var(--muted);margin-bottom:12px}.permissions-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:8px}.restrict-modal-actions{margin-top:16px}.toasts{position:fixed;right:20px;bottom:20px;z-index:200;max-width:400px}.toast{background:var(--panel-elevated);color:var(--text);border:1px solid var(--border);border-radius:12px;box-shadow:0 12px 24px var(--shadow);display:flex;align-items:center;gap:12px;padding:12px 16px;animation:slideIn .3s ease}.toast.compact{max-width:350px}.toast-content{flex:1;min-width:0}.toast .toast-title{font-weight:600;font-size:.9rem;margin-bottom:2px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.toast .toast-body{font-size:.8rem;color:var(--muted);white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.toast-history-btn{background:none;border:none;color:var(--muted);cursor:pointer;padding:4px;border-radius:4px;font-size:.9rem;transition:all var(--transition-fast)}.toast-history-btn:hover{background:var(--hover);color:var(--text)}.notification-history{max-height:400px;overflow-y:auto}.empty-history{text-align:center;color:var(--muted);padding:40px}.history-item{padding:12px;border-bottom:1px solid var(--border);cursor:default;transition:background var(--transition-fast)}.history-item:hover{background:var(--hover)}.history-item.clickable{cursor:pointer}.history-item.clickable:hover{background:var(--hover-strong)}.history-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:4px}.history-title{font-weight:600}.history-time{font-size:.8rem;color:var(--muted)}.history-body{font-size:.9rem;color:var(--muted)}.sticker-panel{position:absolute;bottom:100%;left:0;right:0;background:var(--panel);border:1px solid var(--border);border-bottom:none;border-radius:12px 12px 0 0;max-height:200px;display:flex;flex-direction:column;box-shadow:0 -4px 12px var(--shadow)}.sticker-panel-header{display:flex;justify-content:space-between;align-items:center;padding:12px 16px;border-bottom:1px solid var(--border);font-weight:600}.sticker-list{flex:1;overflow-y:auto;padding:8px;display:grid;grid-template-columns:repeat(auto-fill,minmax(80px,1fr));gap:8px}.stickers-empty{text-align:center;color:var(--muted);padding:40px 20px}.sticker-item{aspect-ratio:1;border:1px solid var(--border);border-radius:8px;cursor:pointer;display:flex;align-items:center;justify-content:center;background:var(--panel-alt);transition:all var(--transition-fast);overflow:hidden}.sticker-item:hover{background:var(--hover);border-color:var(--accent);transform:scale(1.05)}.sticker-thumb{width:100%;height:100%;object-fit:contain;font-size:2rem;display:flex;align-items:center;justify-content:center}.user-actions-menu{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);background:var(--panel);border:1px solid var(--border);border-radius:12px;box-shadow:0 12px 24px var(--shadow);z-index:1000;min-width:300px;max-width:90vw}.user-actions-header{display:flex;justify-content:space-between;align-items:center;padding:16px 20px;border-bottom:1px solid var(--border);font-weight:600}.user-actions-list{padding:16px 20px;display:flex;flex-direction:column;gap:8px}.user-actions-list .btn{justify-content:flex-start;text-align:left}.delete-chat-btn{background:none;border:none;color:var(--muted);cursor:pointer;padding:8px;border-radius:4px;font-size:.9rem;opacity:0;transition:all var(--transition-fast)}.chat-item:hover .delete-chat-btn{opacity:1}.delete-chat-btn:hover{background:var(--danger);color:#fff}.sender-name{cursor:pointer;transition:color var(--transition-fast)}.sender-name:hover{color:var(--accent)}@keyframes pulse{0%,to{background-color:transparent}50%{background-color:var(--hover)}}@media (max-width: 1024px){.sidebar{max-width:280px}}@media (max-width: 840px){.sidebar{position:absolute;left:0;top:0;bottom:0;z-index:10;max-width:280px;box-shadow:0 18px 40px #0006}.menu-toggle{display:block}.sidebar-close{display:grid!important}.composer{grid-template-columns:auto auto 1fr auto}.floating-btn{bottom:90px}.sticker-panel{max-height:180px}}
