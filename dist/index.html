<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <title>Telegram Bot Web UI (Multi-chat + Media + Notification)</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
  <script type="module" crossorigin src="/assets/index-Dq4rfoNr.js"></script>
  <link rel="stylesheet" crossorigin href="/assets/index-yxYDLHmg.css">
</head>
<body data-theme="dark">
  <div class="app">
    <aside id="sidebar" class="sidebar">
      <div class="sidebar-header">
        <div class="app-title" data-i18n="appTitle">Telegram Bot</div>
        <div class="sidebar-actions">
          <button id="themeToggleBtn" class="icon-btn" title="Äá»•i giao diá»‡n" aria-label="Äá»•i giao diá»‡n">ğŸŒ“</button>
          <button id="settingsBtn" class="icon-btn" title="CÃ i Ä‘áº·t" aria-label="CÃ i Ä‘áº·t">âš™ï¸</button>
          <button id="sidebarCloseBtn" class="icon-btn sidebar-close" title="ÄÃ³ng" aria-label="ÄÃ³ng sidebar">âœ•</button>
        </div>
      </div>
      <div class="open-chat">
        <div class="open-chat-wrapper">
          <input id="openChatInput" type="text" placeholder="Nháº­p chat ID hoáº·c @username" />
          <button id="openChatBtn" class="icon-btn primary" title="Má»Ÿ chat" aria-label="Má»Ÿ chat">â¤</button>
        </div>
      </div>
      <div id="chatList" class="chat-list">
        <div id="emptyNotice" class="chat-empty" data-i18n="noConversations">
          ChÆ°a cÃ³ cuá»™c trÃ² chuyá»‡n. Khi cÃ³ tin nháº¯n Ä‘áº¿n, má»¥c sáº½ hiá»‡n á»Ÿ Ä‘Ã¢y.
        </div>
      </div>
    </aside>

    <main class="chat">
      <div class="chat-header">
        <div class="header-left">
          <button id="menuToggle" class="icon-btn menu-toggle" aria-label="Má»Ÿ danh sÃ¡ch chat">â˜°</button>
          <div id="activeAvatar" class="avatar" style="display:none;">?</div>
          <div>
            <div id="headerTitle" class="header-title" data-i18n="noChatSelected">ChÆ°a chá»n cuá»™c trÃ² chuyá»‡n</div>
            <div id="status" class="status" data-i18n="statusDisconnected">ChÆ°a káº¿t ná»‘i</div>
          </div>
        </div>
        <div class="header-actions">
          <div id="botInfo" class="status"></div>
          <button id="membersBtn" class="icon-btn" title="Quáº£n lÃ½ thÃ nh viÃªn" aria-label="Quáº£n lÃ½ thÃ nh viÃªn" style="display:none;">ğŸ‘¥</button>
        </div>
      </div>

      <div id="messages" class="messages"></div>
      <button id="newMsgBtn" class="floating-btn" data-i18n="newMessage">â†“ Tin má»›i</button>

      <div class="composer">
        <div id="replyContext" class="reply-context hidden">
          <span data-i18n="replyingTo">Äang tráº£ lá»i:</span> <span id="replyText"></span>
          <span id="cancelReply" class="cancel-reply" role="button" aria-label="Há»§y tráº£ lá»i">âœ•</span>
        </div>
        <button id="attachBtn" class="icon-btn" title="ÄÃ­nh kÃ¨m" aria-label="ÄÃ­nh kÃ¨m">ğŸ“</button>
        <button id="stickerBtn" class="icon-btn" title="Sticker" aria-label="Sticker">ğŸ˜€</button>
        <textarea id="input" rows="2" placeholder="Nháº­p tin nháº¯n..." disabled></textarea>
        <button id="sendBtn" class="icon-btn primary" title="Gá»­i" aria-label="Gá»­i">â¤</button>
        <input id="fileInput" type="file" style="display:none" />
      </div>
      
      <!-- Sticker Panel -->
      <div id="stickerPanel" class="sticker-panel hidden">
        <div class="sticker-panel-header">
          <span data-i18n="sticker">Sticker</span>
          <button id="closeStickerBtn" class="icon-btn" title="ÄÃ³ng" data-i18n="close">âœ•</button>
        </div>
        <div id="stickerList" class="sticker-list"></div>
      </div>
    </main>
  </div>

  <!-- Settings Overlay -->
  <div id="overlay" class="overlay hidden">
    <div class="dialog dialog-large">
      <div class="dialog-header">
        <h3 data-i18n="settingsTitle">Trung tÃ¢m cÃ i Ä‘áº·t</h3>
        <button id="cancelBtn" class="icon-btn" title="ÄÃ³ng" aria-label="ÄÃ³ng" data-i18n="close">âœ•</button>
      </div>

      <div class="dialog-group">
        <h4 data-i18n="botConnection">Káº¿t ná»‘i bot</h4>
        <input id="tokenInput" type="password" placeholder="Bot Token (botXXXXXXXX:YYYYYYYYYYYYYYYY)" />
        <div class="row">
          <input id="proxyInput" type="text" placeholder="CORS proxy prefix (tuá»³ chá»n, vd: https://cors.isomorphic-git.org/)" />
          <button id="testBtn" class="btn secondary" data-i18n="testConnection">Kiá»ƒm tra</button>
        </div>
        <div class="row wrap">
          <button id="deleteWebhookBtn" class="btn danger" data-i18n="deleteWebhook">XÃ³a webhook</button>
          <button id="notifBtn" class="btn secondary" data-i18n="enableNotifications">Báº­t thÃ´ng bÃ¡o</button>
          <button id="saveBtn" class="btn success" data-i18n="saveAndConnect">LÆ°u &amp; Káº¿t ná»‘i</button>
        </div>
        <div class="hint" id="settingsHint" data-i18n="settingsHint">
          Náº¿u nháº­n lá»—i 409 khi polling, hÃ£y xÃ³a webhook. Náº¿u bá»‹ CORS, thÃªm proxy prefix.
        </div>
      </div>

      <div class="dialog-group">
        <h4 data-i18n="theme">Giao diá»‡n</h4>
        <div class="theme-selector">
          <button id="themeOptionLight" class="theme-option" data-theme="light">
            <span class="icon">ğŸŒ</span>
            <span data-i18n="themeLight">SÃ¡ng</span>
          </button>
          <button id="themeOptionDark" class="theme-option" data-theme="dark">
            <span class="icon">ğŸŒš</span>
            <span data-i18n="themeDark">Tá»‘i</span>
          </button>
          <button id="themeOptionSystem" class="theme-option" data-theme="system">
            <span class="icon">ğŸ–¥ï¸</span>
            <span data-i18n="themeSystem">Há»‡ thá»‘ng</span>
          </button>
        </div>
      </div>

      <div class="dialog-group">
        <h4 data-i18n="language">NgÃ´n ngá»¯</h4>
        <div class="theme-selector">
          <button id="langOptionEn" class="theme-option" data-lang="en">
            <span class="icon">ğŸ‡¬ğŸ‡§</span>
            <span>English</span>
          </button>
          <button id="langOptionVi" class="theme-option" data-lang="vi">
            <span class="icon">ğŸ‡»ğŸ‡³</span>
            <span>Tiáº¿ng Viá»‡t</span>
          </button>
        </div>
      </div>

      <div class="dialog-group">
        <h4 data-i18n="botInfo">ThÃ´ng tin bot</h4>
        <div class="bot-details">
          <div><span class="label" data-i18n="botName">TÃªn:</span> <span id="botDetailName" data-i18n="noData">â€”</span></div>
          <div><span class="label" data-i18n="botUsername">Username:</span> <span id="botDetailUsername" data-i18n="noData">â€”</span></div>
          <div><span class="label" data-i18n="botId">Bot ID:</span> <span id="botDetailId" data-i18n="noData">â€”</span></div>
          <div><span class="label" data-i18n="botDescription">MÃ´ táº£:</span> <span id="botDetailDescription" data-i18n="noData">â€”</span></div>
          <div><span class="label" data-i18n="botShortDescription">MÃ´ táº£ ngáº¯n:</span> <span id="botDetailShortDescription" data-i18n="noData">â€”</span></div>
        </div>
        <div class="bot-section">
          <div class="section-title" data-i18n="botCommands">Danh sÃ¡ch lá»‡nh</div>
          <ul id="botCommandsList" class="tag-list"></ul>
        </div>
        <div class="bot-section">
          <div class="section-title" data-i18n="botFeatures">TÃ­nh nÄƒng há»— trá»£</div>
          <ul id="botFeatureList" class="tag-list"></ul>
        </div>
      </div>

      <div class="dialog-group">
        <h4 data-i18n="preferences">TÃ¹y chá»n</h4>
        <label class="option-item">
          <input id="prefAutoScroll" type="checkbox" checked />
          <span data-i18n="prefAutoScroll">Tá»± Ä‘á»™ng cuá»™n Ä‘áº¿n tin má»›i</span>
        </label>
        <label class="option-item">
          <input id="prefSound" type="checkbox" checked />
          <span data-i18n="prefSound">Ã‚m bÃ¡o thÃ´ng bÃ¡o</span>
        </label>
        <label class="option-item">
          <input id="prefPush" type="checkbox" checked />
          <span data-i18n="prefPush">ThÃ´ng bÃ¡o Ä‘áº©y khi tab khÃ´ng hoáº¡t Ä‘á»™ng</span>
        </label>
      </div>
    </div>
  </div>

  <!-- Members Dialog -->
  <div id="membersOverlay" class="overlay hidden">
    <div class="dialog dialog-large members-dialog" id="membersDialog">
      <div class="dialog-header">
        <h3 data-i18n="groupManagement">Quáº£n lÃ½ nhÃ³m</h3>
        <button id="closeMembersBtn" class="icon-btn" title="ÄÃ³ng" aria-label="ÄÃ³ng" data-i18n="close">âœ•</button>
      </div>
      <div class="dialog-tabs">
        <button id="membersTabBtn" class="dialog-tab active" data-tab="members" data-i18n="members">ThÃ nh viÃªn</button>
        <button id="groupTabBtn" class="dialog-tab" data-tab="group" data-i18n="groupInfo">ThÃ´ng tin nhÃ³m</button>
      </div>
      <div id="membersTab" class="tab-panel active">
        <p id="groupInfo" class="group-summary" data-i18n="loadingMembers">Äang táº£i...</p>
        <div id="membersList" class="members-list"></div>
      </div>
      <div id="groupSettingsTab" class="tab-panel">
        <label class="option-item column">
          <span data-i18n="groupName">TÃªn nhÃ³m</span>
          <input id="groupNameInput" type="text" />
        </label>
        <label class="option-item column">
          <span data-i18n="groupDescription">MÃ´ táº£</span>
          <textarea id="groupDescriptionInput" rows="3"></textarea>
        </label>
        <label class="option-item column">
          <span data-i18n="groupPhoto">áº¢nh Ä‘áº¡i diá»‡n</span>
          <input id="groupPhotoInput" type="file" accept="image/*" />
        </label>
        <button id="saveGroupBtn" class="btn success full" data-i18n="saveChanges">LÆ°u thay Ä‘á»•i</button>
      </div>
      <div class="actions">
        <div class="hint" id="membersHint"></div>
        <div class="action-buttons">
          <button id="refreshMembersBtn" class="btn secondary" data-i18n="refresh">â†» Táº£i láº¡i</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Member Detail Modal -->
  <div id="memberModal" class="overlay hidden">
    <div class="dialog dialog-medium member-modal">
      <div class="dialog-header">
        <h3 data-i18n="memberInfo">ThÃ´ng tin thÃ nh viÃªn</h3>
        <button id="closeMemberModalBtn" class="icon-btn" title="ÄÃ³ng" aria-label="ÄÃ³ng" data-i18n="close">âœ•</button>
      </div>
      <div class="member-modal-body">
        <div id="memberModalAvatar" class="member-avatar">?</div>
        <div class="member-modal-info">
          <div id="memberModalName" class="member-name" data-i18n="noData">â€”</div>
          <div id="memberModalUsername" class="member-username" data-i18n="noData">â€”</div>
          <div id="memberModalId" class="member-id" data-i18n="noData">â€”</div>
          <div id="memberModalStatus" class="member-status" data-i18n="noData">â€”</div>
          <div id="memberModalJoined" class="member-joined" data-i18n="noData">â€”</div>
        </div>
      </div>
      <div class="member-modal-actions">
        <button id="memberPromoteBtn" class="btn secondary" data-role="admin">â­ ThÄƒng admin</button>
        <button id="memberModeratorBtn" class="btn secondary" data-role="moderator">ğŸ›¡ï¸ Moderator</button>
        <button id="memberDemoteBtn" class="btn secondary" data-role="member">ğŸ‘¤ ThÃ nh viÃªn</button>
        <button id="memberRestrictBtn" class="btn secondary">ğŸ”’ Háº¡n cháº¿ quyá»n</button>
        <button id="memberKickBtn" class="btn danger">ğŸš« Kick</button>
      </div>
    </div>
  </div>

  <!-- User Actions Menu -->
  <div id="userActionsMenu" class="user-actions-menu hidden">
    <div class="user-actions-header">
      <span id="userActionsTitle" data-i18n="userActions">TÃ¡c vá»¥ vá»›i ngÆ°á»i dÃ¹ng</span>
      <button id="closeUserActionsBtn" class="icon-btn" title="ÄÃ³ng" data-i18n="close">âœ•</button>
    </div>
    <div class="user-actions-list">
      <button id="copyIdBtn" class="btn secondary" data-action="copyId" data-i18n="copyId">ğŸ“‹ Copy ID</button>
      <button id="copyUsernameBtn" class="btn secondary" data-action="copyUsername" data-i18n="copyUsername">ğŸ“‹ Copy username</button>
      <button id="kickUserBtn" class="btn danger" data-action="kick" data-i18n="kickUser">ğŸš« Kick ngÆ°á»i dÃ¹ng</button>
      <button id="promoteUserBtn" class="btn secondary" data-action="promote" data-i18n="promoteAdmin">â­ ThÄƒng admin</button>
      <button id="moderateUserBtn" class="btn secondary" data-action="moderate" data-i18n="promoteModerator">ğŸ›¡ï¸ ThÄƒng moderator</button>
      <button id="demoteUserBtn" class="btn secondary" data-action="demote" data-i18n="demoteToMember">ğŸ‘¤ Háº¡ thÃ nh viÃªn</button>
      <button id="restrictUserBtn" class="btn warning" data-action="restrict" data-i18n="restrictUser">ğŸ”’ Háº¡n cháº¿ quyá»n</button>
    </div>
  </div>

  <!-- Toasts -->
  <div id="toasts" class="toasts"></div>

</body>
</html>
